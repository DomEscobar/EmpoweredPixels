import{C as n,D as o,E as h,u as i}from"./index-CQ-O1ih4.js";async function u(t){return n(o.fighter,{token:t})}async function c(t,e){return n(o.fighter,{method:"PUT",token:t,body:{name:e}})}async function f(t,e){return n(`${o.fighter}/${e}`,{method:"DELETE",token:t})}async function g(t,e,r){return n(`${o.fighter}/${e}/configuration`,{method:"POST",token:t,body:{fighterId:e,attunementId:r}})}async function d(t,e){return n(`${o.equipment}/fighter/${e}`,{token:t})}const y=h("roster",{state:()=>({fighters:[],equipment:{},isLoading:!1,error:null}),actions:{async fetchFighters(){const t=i();if(t.token){this.isLoading=!0;try{this.fighters=await u(t.token)}catch{this.error="Failed to load roster"}finally{this.isLoading=!1}}},async fetchFighterEquipment(t){const e=i();if(e.token)try{const r=await d(e.token,t);this.equipment[t]=r}catch(r){console.error("Failed to load equipment",r)}},async addFighter(t){const e=i();if(e.token){this.isLoading=!0;try{const r=await c(e.token,t);return this.fighters.push(r),r}catch(r){throw this.error="Failed to create fighter",r}finally{this.isLoading=!1}}},async removeFighter(t){const e=i();if(e.token)try{await f(e.token,t),this.fighters=this.fighters.filter(r=>r.id!==t),delete this.equipment[t]}catch{this.error="Failed to delete fighter"}},async updateAttunement(t,e){const r=i();if(r.token)try{await g(r.token,t,e);const s=this.fighters.find(a=>a.id===t);s&&(s.attunementId=e??void 0)}catch(s){this.error="Failed to update attunement",console.error("Failed to update attunement",s)}}}});export{y as u};
