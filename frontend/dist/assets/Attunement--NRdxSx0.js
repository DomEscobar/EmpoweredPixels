import{C as b,E as P,l as h,x,d as k,y as B,o as d,c as m,a as e,e as c,t as r,F,s as S,j as C,q as p,_ as E}from"./index-DzKNk8gt.js";const y="/api",A={async getAttunements(){return b(`${y}/attunements`)},async getAttunement(i){return b(`${y}/attunement/${i}`)},async awardXP(i,n){return b(`${y}/attunement/award-xp`,{method:"POST",body:{element:i,source:n}})},async getBonuses(){return b(`${y}/attunements/bonuses`)}},q={fire:{name:"Fire",icon:"ðŸ”¥",color:"#ef4444",description:"Increases attack power"},water:{name:"Water",icon:"ðŸ’§",color:"#3b82f6",description:"Improves defense"},earth:{name:"Earth",icon:"ðŸŒ",color:"#22c55e",description:"Maximizes defense"},air:{name:"Air",icon:"ðŸ’¨",color:"#a8a29e",description:"Boosts speed"},light:{name:"Light",icon:"âœ¨",color:"#fbbf24",description:"Enhances precision"},dark:{name:"Dark",icon:"ðŸŒ‘",color:"#7c3aed",description:"Increases power"}},L=P("attunement",()=>{const i=h([]),n=h(null),o=h(!1),u=h(null),v=x(()=>i.value.reduce((a,f)=>a+f.level,0)),w=x(()=>a=>i.value.find(f=>f.element===a)),_=x(()=>a=>q[a]||{name:a,icon:"â“",color:"#9ca3af",description:""});async function l(){o.value=!0,u.value=null;try{const a=await A.getAttunements();i.value=a.attunements}catch(a){u.value=a.message||"Failed to load attunements"}finally{o.value=!1}}async function s(){try{n.value=await A.getBonuses()}catch(a){console.error("Failed to fetch bonuses:",a)}}async function t(a,f){o.value=!0,u.value=null;try{const g=await A.awardXP(a,f);return g.success&&(await l(),await s()),g}catch(g){return u.value=g.message||"Failed to award XP",null}finally{o.value=!1}}return{attunements:i,bonuses:n,loading:o,error:u,totalLevel:v,getAttunementByElement:w,getElementConfig:_,fetchAttunements:l,fetchBonuses:s,awardXP:t}}),X={class:"attunement-page"},$={key:0,class:"loading"},T={key:1,class:"error"},M={key:2,class:"attunements-grid"},D={class:"element-icon"},I={class:"level-badge"},R={class:"description"},z={class:"progress-section"},N={class:"progress-bar"},V={class:"xp-text"},j={class:"bonuses"},O={class:"bonus-row"},W={class:"bonus-row"},G={class:"bonus-row"},H={class:"bonus-row"},J={key:3,class:"total-bonuses"},K={class:"bonus-grid"},Q={class:"total-item"},U={class:"value"},Y={class:"total-item"},Z={class:"value"},ee={class:"total-item"},se={class:"value"},te={class:"total-item"},ne={class:"value"},oe=k({__name:"Attunement",setup(i){const n=L();function o(l){return n.getElementConfig(l)}function u(l){const s=v(l.level);return Math.min(100,Math.round(l.current_xp/s*100))}function v(l){return[0,100,250,450,700,1e3,1350,1750,2200,2700,3250,3850,4500,5200,5950,6750,7600,8500,9450,10450,11500,12600,13750,14950,16200][l]||16200}function w(l){const s=v(l.level);return`${l.current_xp.toLocaleString()} / ${s.toLocaleString()}`}function _(l,s){const t=n.bonuses?.by_element[l];return t?t[s].toFixed(1):"0.0"}return B(()=>{n.fetchAttunements(),n.fetchBonuses()}),(l,s)=>(d(),m("div",X,[s[9]||(s[9]=e("header",{class:"page-header"},[e("h1",null,"âœ¨ Attunements"),e("p",{class:"subtitle"},"Master the 6 elements to gain powerful bonuses")],-1)),c(n).loading?(d(),m("div",$," Loading attunements... ")):c(n).error?(d(),m("div",T,r(c(n).error),1)):(d(),m("div",M,[(d(!0),m(F,null,S(c(n).attunements,t=>(d(),m("div",{key:t.element,class:"attunement-card",style:p({borderColor:o(t.element).color})},[e("div",{class:"card-header",style:p({backgroundColor:o(t.element).color+"20"})},[e("span",D,r(o(t.element).icon),1),e("h3",null,r(o(t.element).name),1),e("span",I,"Level "+r(t.level),1)],4),e("p",R,r(o(t.element).description),1),e("div",z,[e("div",N,[e("div",{class:"progress-fill",style:p({width:u(t)+"%",backgroundColor:o(t.element).color})},null,4)]),e("span",V,r(w(t))+" XP",1)]),e("div",j,[e("div",O,[s[0]||(s[0]=e("span",null,"Power",-1)),e("span",{style:p({color:o(t.element).color})},"+"+r(_(t.element,"power"))+"%",5)]),e("div",W,[s[1]||(s[1]=e("span",null,"Defense",-1)),e("span",{style:p({color:o(t.element).color})},"+"+r(_(t.element,"defense"))+"%",5)]),e("div",G,[s[2]||(s[2]=e("span",null,"Speed",-1)),e("span",{style:p({color:o(t.element).color})},"+"+r(_(t.element,"speed"))+"%",5)]),e("div",H,[s[3]||(s[3]=e("span",null,"Precision",-1)),e("span",{style:p({color:o(t.element).color})},"+"+r(_(t.element,"precision"))+"%",5)])])],4))),128))])),c(n).bonuses?(d(),m("div",J,[s[8]||(s[8]=e("h2",null,"Total Bonuses",-1)),e("div",K,[e("div",Q,[s[4]||(s[4]=e("span",{class:"label"},"Total Power",-1)),e("span",U,"+"+r(c(n).bonuses.total_power.toFixed(1))+"%",1)]),e("div",Y,[s[5]||(s[5]=e("span",{class:"label"},"Total Defense",-1)),e("span",Z,"+"+r(c(n).bonuses.total_defense.toFixed(1))+"%",1)]),e("div",ee,[s[6]||(s[6]=e("span",{class:"label"},"Total Speed",-1)),e("span",se,"+"+r(c(n).bonuses.total_speed.toFixed(1))+"%",1)]),e("div",te,[s[7]||(s[7]=e("span",{class:"label"},"Total Precision",-1)),e("span",ne,"+"+r(c(n).bonuses.total_precision.toFixed(1))+"%",1)])])])):C("",!0)]))}}),ae=E(oe,[["__scopeId","data-v-cfa790a7"]]);export{ae as default};
