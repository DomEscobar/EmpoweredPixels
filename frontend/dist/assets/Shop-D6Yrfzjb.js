import{d as P,M as C,o as t,c as n,n as y,a as e,t as a,x as u,_ as B,j as g,e as _,q as G,A as N,k as q,l as w,y as x,g as L,F as S,s as I,f as M}from"./index-DdJYqMmv.js";const T={class:"gold-info"},V={class:"gold-amount"},E=P({__name:"GoldDisplay",setup(i){const s=C(),o=u(()=>(s.goldBalance?.balance||0).toLocaleString()),p=u(()=>s.loading);return(m,r)=>(t(),n("div",{class:y(["gold-display",{"is-loading":p.value}])},[r[1]||(r[1]=e("div",{class:"gold-icon"},[e("span",{class:"icon"},"ðŸª™")],-1)),e("div",T,[e("span",V,a(o.value),1),r[0]||(r[0]=e("span",{class:"gold-label"},"Gold",-1))])],2))}}),H=B(E,[["__scopeId","data-v-3ba6befd"]]),O={class:"package-header"},A={key:0,class:"popular-badge"},R={key:1,class:"value-badge"},z={class:"package-name"},F={class:"gold-amount"},j={class:"amount"},Y={key:0,class:"bonus-badge"},J={class:"package-footer"},K={class:"price"},Q=["disabled"],U=P({__name:"GoldPackageCard",props:{item:{}},emits:["purchase"],setup(i){const s=i,o=C(),p=u(()=>{const v=s.item.gold_amount||0;return v>=6500?"legendary":v>=1200?"epic":v>=550?"rare":"common"}),m=u(()=>s.item.name.includes("Satchel")),r=u(()=>s.item.name.includes("Hoard")),f=u(()=>{const v=s.item.metadata||{};return v.bonus_percent?v.bonus_percent:s.item.name.includes("Hoard")?30:s.item.name.includes("Chest")?20:s.item.name.includes("Satchel")?10:0}),b=u(()=>o.formatItemPrice(s.item));return(v,c)=>(t(),n("div",{class:y(["gold-package",`tier-${p.value}`])},[e("div",O,[m.value?(t(),n("span",A,"Most Popular")):g("",!0),r.value?(t(),n("span",R,"Best Value")):g("",!0),e("h3",z,a(i.item.name),1)]),e("div",F,[c[1]||(c[1]=e("span",{class:"gold-icon"},"ðŸª™",-1)),e("span",j,a(i.item.gold_amount?.toLocaleString()),1),c[2]||(c[2]=e("span",{class:"gold-label"},"Gold",-1))]),f.value>0?(t(),n("div",Y," +"+a(f.value)+"% Bonus ",1)):g("",!0),e("div",J,[e("span",K,a(b.value),1),e("button",{class:"buy-button",disabled:_(o).purchaseInProgress,onClick:c[0]||(c[0]=k=>v.$emit("purchase",i.item.id))},a(_(o).purchaseInProgress?"Processing...":"Buy"),9,Q)])],2))}}),W=B(U,[["__scopeId","data-v-ffb7a890"]]),X={class:"bundle-name"},Z={class:"bundle-content"},ee={class:"bundle-description"},se={key:0,class:"bonus-gold"},te={class:"bonus-amount"},oe={key:1,class:"bonus-item"},ne={key:2,class:"bonus-item"},ae={class:"bundle-footer"},le={class:"price"},ie=["disabled"],ce=P({__name:"BundleCard",props:{item:{}},emits:["purchase"],setup(i){const s=i,o=C(),p=u(()=>o.getRarityColor(s.item.rarity)),m=u(()=>o.getRarityName(s.item.rarity)),r=u(()=>o.formatItemPrice(s.item)),f=u(()=>o.purchaseInProgress?!0:s.item.price_currency==="gold"?o.hasInsufficientGold(s.item):!1),b=u(()=>o.purchaseInProgress?"Processing...":s.item.price_currency==="gold"&&o.hasInsufficientGold(s.item)?"Insufficient Gold":"Buy Now");return(v,c)=>(t(),n("div",{class:"bundle-card",style:G({borderColor:p.value})},[e("div",{class:"bundle-header",style:G({backgroundColor:p.value+"20"})},[e("span",{class:"rarity-badge",style:G({backgroundColor:p.value})},a(m.value),5),e("h3",X,a(i.item.name),1)],4),e("div",Z,[e("p",ee,a(i.item.description),1),i.item.gold_amount?(t(),n("div",se,[c[1]||(c[1]=e("span",{class:"bonus-icon"},"+",-1)),e("span",te,a(i.item.gold_amount.toLocaleString())+" Gold",1)])):g("",!0),i.item.metadata?.drop_boosts?(t(),n("div",oe,[c[2]||(c[2]=e("span",{class:"bonus-icon"},"ðŸŽ",-1)),e("span",null,a(i.item.metadata.drop_boosts)+" Drop Boosts",1)])):g("",!0),i.item.metadata?.equipment_count?(t(),n("div",ne,[c[3]||(c[3]=e("span",{class:"bonus-icon"},"âš”ï¸",-1)),e("span",null,a(i.item.metadata.equipment_count)+" Equipment Items",1)])):g("",!0)]),e("div",ae,[e("span",le,a(r.value),1),e("button",{class:"buy-button",disabled:f.value,onClick:c[0]||(c[0]=k=>v.$emit("purchase",i.item.id))},a(b.value),9,ie)])],4))}}),re=B(ce,[["__scopeId","data-v-271cfe96"]]),de={class:"modal-content"},ue={key:0,class:"modal-body"},me={class:"price-tag"},ve={class:"balance-info"},pe={class:"balance-row"},_e={class:"balance"},ge={key:0,class:"balance-row"},he={class:"modal-actions"},fe=["disabled"],be={key:0},ye={key:1},ke=P({__name:"PurchaseModal",props:{isOpen:{type:Boolean},item:{}},emits:["close","success"],setup(i,{emit:s}){const o=i,p=s,m=C(),r=w(null),f=u(()=>o.item?m.getRarityColor(o.item.rarity):"#9ca3af"),b=u(()=>o.item?m.formatItemPrice(o.item):""),v=u(()=>m.goldBalance?.balance||0),c=u(()=>o.item?.price_currency==="gold"),k=u(()=>!c.value||!o.item?!0:v.value>=o.item.price_amount),h=u(()=>m.purchaseInProgress?!1:c.value?k.value:!0);async function d(){!o.item||!h.value||(r.value=await m.purchaseItem(o.item.id),r.value.success&&setTimeout(()=>{p("success",r.value),l()},1500))}function l(){r.value=null,p("close")}return N(()=>o.isOpen,D=>{D||(r.value=null)}),(D,$)=>i.isOpen?(t(),n("div",{key:0,class:"modal-overlay",onClick:q(l,["self"])},[e("div",de,[e("div",{class:"modal-header"},[$[0]||($[0]=e("h2",null,"Confirm Purchase",-1)),e("button",{class:"close-button",onClick:l},"Ã—")]),i.item?(t(),n("div",ue,[e("div",{class:"item-preview",style:G({borderColor:f.value})},[e("h3",null,a(i.item.name),1),e("p",null,a(i.item.description),1),e("div",me,a(b.value),1)],4),e("div",ve,[e("div",pe,[$[1]||($[1]=e("span",null,"Current Balance:",-1)),e("span",_e,a(v.value.toLocaleString())+" Gold",1)]),c.value?(t(),n("div",ge,[$[2]||($[2]=e("span",null,"After Purchase:",-1)),e("span",{class:y(["balance",k.value?"positive":"negative"])},a((v.value-i.item.price_amount).toLocaleString())+" Gold ",3)])):g("",!0)]),r.value?(t(),n("div",{key:0,class:y(["result-message",r.value.success?"success":"error"])},a(r.value.message),3)):g("",!0),e("div",he,[e("button",{class:"cancel-button",onClick:l},"Cancel"),e("button",{class:"confirm-button",disabled:!h.value||_(m).purchaseInProgress,onClick:d},[_(m).purchaseInProgress?(t(),n("span",be,"Processing...")):(t(),n("span",ye,"Confirm Purchase"))],8,fe)])])):g("",!0)])])):g("",!0)}}),$e=B(ke,[["__scopeId","data-v-a0966da3"]]),Pe={class:"shop-page"},Ce={class:"shop-header"},Be={class:"shop-tabs"},Se=["onClick"],Ie={class:"shop-content"},Ge={key:0,class:"tab-content"},we={key:0,class:"loading"},De={key:1,class:"error"},Le={key:2,class:"gold-grid"},Me={key:1,class:"tab-content"},Ne={key:0,class:"loading"},qe={key:1,class:"error"},xe={key:2,class:"bundles-grid"},Te={key:2,class:"tab-content"},Ve={key:0,class:"empty"},Ee={key:1,class:"transactions-list"},He={class:"tx-info"},Oe={class:"tx-name"},Ae={class:"tx-date"},Re=P({__name:"Shop",setup(i){const s=C(),o=w("gold"),p=w(!1),m=w(null),r=[{id:"gold",label:"Gold"},{id:"bundles",label:"Bundles"},{id:"history",label:"History"}];x(()=>{f()});function f(){s.fetchGoldBalance(),o.value==="gold"?s.fetchGoldPackages():o.value==="bundles"?s.fetchBundles():o.value==="history"&&s.fetchTransactions()}function b(h){const d=[...s.goldPackages,...s.bundles].find(l=>l.id===h);d&&(m.value=d,p.value=!0)}function v(){p.value=!1,m.value=null}function c(h){console.log("Purchase successful:",h)}function k(h){return new Date(h).toLocaleDateString()}return(h,d)=>(t(),n("div",Pe,[e("header",Ce,[d[0]||(d[0]=e("h1",null,"ðŸª Shop",-1)),L(H)]),e("nav",Be,[(t(),n(S,null,I(r,l=>e("button",{key:l.id,class:y(["tab",{active:o.value===l.id}]),onClick:D=>o.value=l.id},a(l.label),11,Se)),64))]),e("main",Ie,[o.value==="gold"?(t(),n("section",Ge,[d[1]||(d[1]=e("h2",null,"Gold Emporium",-1)),d[2]||(d[2]=e("p",{class:"tab-description"},"Purchase gold for upgrades and items",-1)),_(s).loading?(t(),n("div",we," Loading... ")):_(s).error?(t(),n("div",De,a(_(s).error),1)):(t(),n("div",Le,[(t(!0),n(S,null,I(_(s).goldPackages,l=>(t(),M(W,{key:l.id,item:l,onPurchase:b},null,8,["item"]))),128))]))])):g("",!0),o.value==="bundles"?(t(),n("section",Me,[d[3]||(d[3]=e("h2",null,"Equipment Bundles",-1)),d[4]||(d[4]=e("p",{class:"tab-description"},"Curated bundles with guaranteed rarity items",-1)),_(s).loading?(t(),n("div",Ne," Loading... ")):_(s).error?(t(),n("div",qe,a(_(s).error),1)):(t(),n("div",xe,[(t(!0),n(S,null,I(_(s).bundles,l=>(t(),M(re,{key:l.id,item:l,onPurchase:b},null,8,["item"]))),128))]))])):g("",!0),o.value==="history"?(t(),n("section",Te,[d[5]||(d[5]=e("h2",null,"Purchase History",-1)),d[6]||(d[6]=e("p",{class:"tab-description"},"Your recent transactions",-1)),_(s).transactions.length===0?(t(),n("div",Ve," No transactions yet ")):(t(),n("div",Ee,[(t(!0),n(S,null,I(_(s).transactions,l=>(t(),n("div",{key:l.id,class:y(["transaction",l.status])},[e("div",He,[e("span",Oe,a(l.item_name),1),e("span",Ae,a(k(l.created)),1)]),e("div",{class:y(["tx-amount",{negative:l.gold_change<0}])},a(l.gold_change>0?"+":"")+a(l.gold_change)+" Gold ",3)],2))),128))]))])):g("",!0)]),L($e,{"is-open":p.value,item:m.value,onClose:v,onSuccess:c},null,8,["is-open","item"])]))}}),Fe=B(Re,[["__scopeId","data-v-6f9b0caa"]]);export{Fe as default};
