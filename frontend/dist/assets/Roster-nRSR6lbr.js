import{d as ae,o as u,c as x,a as e,t as r,q as F,b as j,F as z,s as E,j as V,x as J,n as S,y as xe,z as pe,A as ve,l as X,e as P,f as ee,g as W,w as K,T as Z,B as te,k as se,i as he,v as fe,_ as ye}from"./index-DzKNk8gt.js";import{u as be}from"./store-PtautCur.js";const _e={class:"space-y-8"},we={class:"rounded-xl border border-slate-800 bg-slate-800/30 p-4"},ke={class:"mb-3 flex items-center justify-between"},Ce={class:"flex items-center gap-3"},Ae={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-amber-500 to-orange-600 text-lg font-black text-white shadow-lg"},Se={class:"text-sm font-medium text-white"},$e={class:"text-xs text-slate-500"},Ie={class:"text-right"},Le={class:"text-2xl font-bold text-white"},Ne={class:"h-3 overflow-hidden rounded-full bg-slate-800"},Re={class:"mb-6"},Me={class:"grid grid-cols-2 gap-3"},ze={class:"mb-2 flex items-center justify-between"},Ee={class:"text-sm text-slate-400"},Te={class:"text-lg font-bold text-white"},Oe={class:"h-1.5 overflow-hidden rounded-full bg-slate-800"},Pe={class:"mb-6"},We={class:"grid grid-cols-2 gap-3"},Ve={class:"mb-2 flex items-center justify-between"},je={class:"text-sm text-slate-400"},Fe={class:"text-lg font-bold text-white"},Be={class:"h-1.5 overflow-hidden rounded-full bg-slate-800"},Ue={class:"grid grid-cols-2 gap-3"},Ge={class:"mb-2 flex items-center justify-between"},qe={class:"text-sm text-slate-400"},De={class:"text-lg font-bold text-white"},He={class:"h-1.5 overflow-hidden rounded-full bg-slate-800"},Xe={key:0,class:"space-y-2"},Ye={class:"flex items-center gap-4"},Ke={class:"flex items-center gap-2"},Ze={key:0,class:"rounded bg-emerald-500/20 px-1.5 py-0.5 text-xs font-bold text-emerald-400"},Je={class:"flex items-center gap-2 text-xs text-slate-500"},Qe={key:1,class:"rounded-xl border-2 border-dashed border-slate-800 p-8 text-center"},et={class:"grid grid-cols-5 gap-2"},tt=["onClick"],st={class:"text-3xl"},lt={key:0,class:"mt-3 text-sm text-slate-500"},at=ae({__name:"FighterStats",props:{fighter:{},equipment:{}},setup(_){const l=_,d=be(),L=[{id:"Fire",name:"Fire",icon:"ðŸ”¥",bgActive:"bg-orange-900/50",ring:"ring-orange-500",shadow:"shadow-orange-500/30"},{id:"Water",name:"Water",icon:"ðŸ’§",bgActive:"bg-blue-900/50",ring:"ring-blue-500",shadow:"shadow-blue-500/30"},{id:"Earth",name:"Earth",icon:"ðŸª¨",bgActive:"bg-amber-900/50",ring:"ring-amber-600",shadow:"shadow-amber-500/30"},{id:"Wind",name:"Wind",icon:"ðŸ’¨",bgActive:"bg-teal-900/50",ring:"ring-teal-500",shadow:"shadow-teal-500/30"},{id:"Lightning",name:"Lightning",icon:"âš¡",bgActive:"bg-yellow-900/50",ring:"ring-yellow-500",shadow:"shadow-yellow-500/30"}],k=g=>({Fire:"Increases damage output and burn effects in combat.",Water:"Enhances healing abilities and resistance to fire.",Earth:"Boosts armor and stability, reducing knockback.",Wind:"Improves speed and evasion, enabling faster attacks.",Lightning:"Adds chain damage and stun potential to attacks."})[g]||"",h=async g=>{const s=l.fighter.attunementId===g?null:g;await d.updateAttunement(l.fighter.id,s)},b=J(()=>l.fighter.xpToNextLevel?Math.round(l.fighter.xp/l.fighter.xpToNextLevel*100):0),$=J(()=>[{key:"power",label:"Power",value:l.fighter.power},{key:"precision",label:"Precision",value:l.fighter.precision},{key:"ferocity",label:"Ferocity",value:l.fighter.ferocity},{key:"conditionPower",label:"Condition Power",value:l.fighter.conditionPower}]),B=J(()=>[{key:"vitality",label:"Vitality",value:l.fighter.vitality},{key:"armor",label:"Armor",value:l.fighter.armor},{key:"parryChance",label:"Parry Chance",value:l.fighter.parryChance,rawValue:l.fighter.parryChance,suffix:"%"},{key:"healingPower",label:"Healing Power",value:l.fighter.healingPower}]),R=J(()=>[{key:"speed",label:"Speed",value:l.fighter.speed,rawValue:l.fighter.speed,suffix:""},{key:"agility",label:"Agility",value:l.fighter.agility,rawValue:l.fighter.agility,suffix:""},{key:"accuracy",label:"Accuracy",value:l.fighter.accuracy,rawValue:l.fighter.accuracy,suffix:""},{key:"vision",label:"Vision",value:l.fighter.vision,rawValue:l.fighter.vision,suffix:""}]),c=g=>{const s=g.toLowerCase();return s.includes("sword")||s.includes("weapon")||s.includes("axe")||s.includes("dagger")?"âš”ï¸":s.includes("staff")||s.includes("wand")?"ðŸª„":s.includes("bow")?"ðŸ¹":s.includes("chest")||s.includes("armor")||s.includes("plate")?"ðŸ›¡ï¸":s.includes("head")||s.includes("helmet")||s.includes("helm")?"ðŸª–":s.includes("legs")||s.includes("pants")||s.includes("greaves")?"ðŸ‘–":s.includes("shoes")||s.includes("boots")||s.includes("feet")?"ðŸ¥¾":s.includes("gloves")||s.includes("hands")||s.includes("gauntlets")?"ðŸ§¤":s.includes("ring")?"ðŸ’":s.includes("amulet")||s.includes("necklace")?"ðŸ“¿":"ðŸ“¦"},o=g=>{switch(g){case 0:return"bg-slate-700 text-slate-300";case 1:return"bg-gradient-to-br from-emerald-800 to-emerald-900 text-emerald-300";case 2:return"bg-gradient-to-br from-blue-800 to-blue-900 text-blue-300";case 3:return"bg-gradient-to-br from-purple-800 to-purple-900 text-purple-300";case 4:return"bg-gradient-to-br from-amber-700 to-orange-800 text-amber-200";default:return"bg-slate-700"}},v=g=>{switch(g){case 0:return"border border-slate-800 bg-slate-900/50";case 1:return"border border-emerald-500/30 bg-emerald-950/30";case 2:return"border border-blue-500/30 bg-blue-950/30";case 3:return"border border-purple-500/30 bg-purple-950/30";case 4:return"border border-amber-500/30 bg-amber-950/30";default:return"border border-slate-800 bg-slate-900/50"}},f=g=>{switch(g){case 0:return"text-slate-400";case 1:return"text-emerald-400";case 2:return"text-blue-400";case 3:return"text-purple-400";case 4:return"text-amber-400";default:return"text-slate-400"}},A=g=>{switch(g){case 0:return"Common";case 1:return"Rare";case 2:return"Fabled";case 3:return"Mythic";case 4:return"Legendary";default:return"Unknown"}};return(g,s)=>(u(),x("div",_e,[e("section",we,[e("div",ke,[e("div",Ce,[e("div",Ae,r(_.fighter.level),1),e("div",null,[e("div",Se,"Level "+r(_.fighter.level),1),e("div",$e,r(_.fighter.currentExp)+" / "+r(_.fighter.levelExp)+" XP",1)])]),e("div",Ie,[e("div",Le,r(b.value)+"%",1),s[0]||(s[0]=e("div",{class:"text-xs text-slate-500"},"to next level",-1))])]),e("div",Ne,[e("div",{class:"h-full rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 transition-all duration-700",style:F({width:`${b.value}%`})},null,4)])]),e("section",null,[s[4]||(s[4]=e("h4",{class:"mb-4 flex items-center gap-2 text-sm font-bold uppercase tracking-widest text-slate-400"},[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),j(" Combat Attributes ")],-1)),e("div",Re,[s[1]||(s[1]=e("div",{class:"mb-2 text-xs font-medium uppercase tracking-wider text-red-400"},"Offense",-1)),e("div",Me,[(u(!0),x(z,null,E($.value,a=>(u(),x("div",{key:a.key,class:"rounded-lg border border-slate-800 bg-slate-900/50 p-3"},[e("div",ze,[e("span",Ee,r(a.label),1),e("span",Te,r(a.value),1)]),e("div",Oe,[e("div",{class:"h-full rounded-full bg-gradient-to-r from-red-500 to-orange-500 transition-all",style:F({width:`${Math.min(100,a.value)}%`})},null,4)])]))),128))])]),e("div",Pe,[s[2]||(s[2]=e("div",{class:"mb-2 text-xs font-medium uppercase tracking-wider text-emerald-400"},"Defense",-1)),e("div",We,[(u(!0),x(z,null,E(B.value,a=>(u(),x("div",{key:a.key,class:"rounded-lg border border-slate-800 bg-slate-900/50 p-3"},[e("div",Ve,[e("span",je,r(a.label),1),e("span",Fe,r(a.value),1)]),e("div",Be,[e("div",{class:"h-full rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 transition-all",style:F({width:`${Math.min(100,a.value)}%`})},null,4)])]))),128))])]),e("div",null,[s[3]||(s[3]=e("div",{class:"mb-2 text-xs font-medium uppercase tracking-wider text-sky-400"},"Utility",-1)),e("div",Ue,[(u(!0),x(z,null,E(R.value,a=>(u(),x("div",{key:a.key,class:"rounded-lg border border-slate-800 bg-slate-900/50 p-3"},[e("div",Ge,[e("span",qe,r(a.label),1),e("span",De,r(a.value)+r(a.suffix||""),1)]),e("div",He,[e("div",{class:"h-full rounded-full bg-gradient-to-r from-sky-500 to-indigo-500 transition-all",style:F({width:`${Math.min(100,a.rawValue)}%`})},null,4)])]))),128))])])]),e("section",null,[s[7]||(s[7]=e("h4",{class:"mb-4 flex items-center gap-2 text-sm font-bold uppercase tracking-widest text-slate-400"},[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})]),j(" Equipment ")],-1)),_.equipment.length?(u(),x("div",Xe,[(u(!0),x(z,null,E(_.equipment,a=>(u(),x("div",{key:a.id,class:S(["flex items-center justify-between rounded-xl p-4 transition-all",v(a.rarity)])},[e("div",Ye,[e("div",{class:S(["flex h-12 w-12 items-center justify-center rounded-xl text-2xl shadow-lg",o(a.rarity)])},r(c(a.type)),3),e("div",null,[e("div",Ke,[e("span",{class:S(["font-bold",f(a.rarity)])},r(a.type),3),a.enhancement?(u(),x("span",Ze," +"+r(a.enhancement),1)):V("",!0)]),e("div",Je,[e("span",null,"Level "+r(a.level),1),s[5]||(s[5]=e("span",{class:"h-1 w-1 rounded-full bg-slate-600"},null,-1)),e("span",{class:S(f(a.rarity))},r(A(a.rarity)),3)])])])],2))),128))])):(u(),x("div",Qe,[...s[6]||(s[6]=[e("div",{class:"mb-2 text-3xl"},"ðŸ“¦",-1),e("p",{class:"text-sm text-slate-500"},"No equipment assigned",-1),e("p",{class:"mt-1 text-xs text-slate-600"},"Visit the Inventory to equip gear",-1)])]))]),e("section",null,[s[8]||(s[8]=e("h4",{class:"mb-4 flex items-center gap-2 text-sm font-bold uppercase tracking-widest text-slate-400"},[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),j(" Elemental Attunement ")],-1)),e("div",et,[(u(),x(z,null,E(L,a=>e("button",{key:a.id,onClick:N=>h(a.id),class:S(["flex flex-col items-center gap-2 rounded-xl p-4 transition-all",_.fighter.attunementId===a.id?`${a.bgActive} ring-2 ${a.ring} shadow-lg ${a.shadow}`:"border border-slate-800 bg-slate-900/50 hover:bg-slate-800"])},[e("span",st,r(a.icon),1),e("span",{class:S(["text-xs font-bold uppercase tracking-wider",_.fighter.attunementId===a.id?"text-white":"text-slate-500"])},r(a.name),3)],10,tt)),64))]),_.fighter.attunementId?(u(),x("p",lt,r(k(_.fighter.attunementId)),1)):V("",!0)])]))}}),nt=_=>{let l=3735928559;for(let d=0;d<_.length;d++)l=Math.imul(l^_.charCodeAt(d),2654435761);return()=>(l=Math.imul(l^l>>>16,2246822507),l=Math.imul(l^l>>>13,3266489909),(l>>>0)/4294967296)},ot=(_,l)=>{const d=nt(_),L=["#fca5a5","#fcd34d","#ad5e25","#5f370e","#e5e7eb","#d1d5db","#9ca3af"],k=L[Math.floor(d()*L.length)];let h="#3b82f6",b="#1e3a8a";const $=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#6366f1"],B=["#1e3a8a","#991b1b","#065f46","#b45309","#5b21b6","#4338ca"];if(l==="Fire")h="#ef4444",b="#991b1b";else if(l==="Earth")h="#d97706",b="#78350f";else if(l==="Water")h="#3b82f6",b="#1e3a8a";else if(l==="Wind")h="#10b981",b="#065f46";else if(l==="Lightning")h="#eab308",b="#854d0e";else{const o=Math.floor(d()*$.length);h=$[o],b=B[o]}const R=.9+d()*.2,c=.85+d()*.3;return{skin:k,armorPrimary:h,armorSecondary:b,heightScale:R,buildScale:c,headType:d()>.5?"helmet":"standard"}},it=32,le=ae({__name:"VoxelFighter",props:{seed:{},attunement:{},animate:{type:Boolean},isAttacking:{type:Boolean},facing:{}},setup(_){const l=_,d=X(null);let L;const k=(c,o,v)=>{const f=Math.cos(v),A=Math.sin(v);return{x:c*f-o*A,y:c*A+o*f}},h=(c,o,v,f,A)=>{const g=(c-o)*32,s=(c+o)*16;return{x:v/2+g*A,y:f/2+s*A}},b=(c,o)=>{const v=parseInt(c.slice(1),16),f=o<0?0:255,A=o<0?o*-1:o,g=v>>16,s=v>>8&255,a=v&255;return"#"+(16777216+(Math.round((f-g)*A)+g)*65536+(Math.round((f-s)*A)+s)*256+(Math.round((f-a)*A)+a)).toString(16).slice(1)},$=(c,o,v,f,A,g,s,a,N,T,U,G)=>{const i=A/2,t=g/2,n=[{x:i,y:t},{x:-i,y:t},{x:-i,y:-t},{x:i,y:-t}],p=n.map(m=>{const C=k(m.x,m.y,a);return{x:o+C.x,y:v+C.y,z:f+s}}),q=n.map(m=>{const C=k(m.x,m.y,a);return{x:o+C.x,y:v+C.y,z:f}}),D=m=>{const C=h(m.x,m.y,U,G,T);return{x:C.x,y:C.y-m.z*it*T}},y=p.map(D),I=q.map(D);c.fillStyle=b(N,.1),c.beginPath(),c.moveTo(y[0].x,y[0].y);for(let m=1;m<4;m++)c.lineTo(y[m].x,y[m].y);c.closePath(),c.fill(),c.strokeStyle=b(N,-.2),c.lineWidth=1,c.stroke();let O=0,H=y[0].y;for(let m=1;m<4;m++)y[m].y>H&&(H=y[m].y,O=m);const M=(m,C,Y)=>{c.fillStyle=b(N,Y),c.beginPath(),c.moveTo(y[m].x,y[m].y),c.lineTo(y[C].x,y[C].y),c.lineTo(I[C].x,I[C].y),c.lineTo(I[m].x,I[m].y),c.closePath(),c.fill(),c.stroke()};M(O,(O+1)%4,-.3),M(O,(O+3)%4,-.1)},B=(c,o,v,f,A,g)=>{const N=Math.sin(v*.005)*.05,T=l.animate?Math.sin(v*.005*2):0,U=l.facing==="left"?Math.PI/2:l.facing==="right"?0:Math.PI/4,G=T*.2;let i=-T*.2,t=T*.2;if(g){const w=Math.sin(v*.03);t=-Math.PI/2+w*.5}const n=.25*o.buildScale,p=.12*o.buildScale,q=.3*o.heightScale,D=.25*(o.buildScale*.9),y=.08*o.buildScale,I=.3*o.heightScale,O=0,H=O+I,M=[];M.push({cx:0,cy:0,cz:H+N,w:n,d:p,h:q,offsetVec:{x:0,y:0,z:0},color:o.armorPrimary}),M.push({cx:0,cy:0,cz:H+q+N,w:D,d:D,h:D,offsetVec:{x:0,y:0,z:0},color:o.headType==="helmet"?o.armorSecondary:o.skin});const m=.06*o.buildScale;M.push({cx:0,cy:m,cz:O,w:y,d:y,h:I,offsetVec:{x:Math.sin(G)*.1,y:0,z:0},color:o.armorSecondary}),M.push({cx:0,cy:-m,cz:O,w:y,d:y,h:I,offsetVec:{x:Math.sin(-G)*.1,y:0,z:0},color:o.armorSecondary});const C=H+q-.05,Y=.16*o.buildScale;M.push({cx:0,cy:Y,cz:C-I+N,w:y,d:y,h:I,offsetVec:{x:Math.sin(i)*.1,y:0,z:Math.cos(i)*.1-.1},color:o.armorPrimary});const ne=Math.sin(t)*.2,oe=C-I+Math.cos(t)*.1-.1+N;M.push({cx:0,cy:-Y,cz:C-I+N,w:y,d:y,h:I,offsetVec:{x:ne,y:0,z:oe-(C-I+N)},color:o.armorPrimary}),M.push({cx:.1,cy:-Y-.05,cz:oe,w:.4,d:.05,h:.05,offsetVec:{x:ne+.2,y:0,z:0},color:"#cbd5e1"});const ie=M.map(w=>{let Q=w.cx+w.offsetVec.x,me=w.cy+w.offsetVec.y,re=w.cz+w.offsetVec.z;const de=k(Q,me,U),ce=de.x,ue=de.y,ge=ce+ue+re*.1;return{...w,wx:ce,wy:ue,wz:re,depth:ge}});ie.sort((w,Q)=>w.depth-Q.depth),ie.forEach(w=>{$(c,w.wx,w.wy,w.wz,w.w,w.d,w.h,U,w.color,1.5,f,A)})},R=c=>{if(!d.value)return;const o=d.value.getContext("2d");if(!o)return;const v=d.value.getBoundingClientRect();(d.value.width!==v.width||d.value.height!==v.height)&&(d.value.width=v.width,d.value.height=v.height);const f=ot(l.seed,l.attunement);o.clearRect(0,0,d.value.width,d.value.height),B(o,f,c,d.value.width,d.value.height,l.isAttacking||!1),l.animate&&(L=requestAnimationFrame(R))};return xe(()=>{L=requestAnimationFrame(R)}),pe(()=>{cancelAnimationFrame(L)}),ve(()=>[l.seed,l.attunement],()=>{R(performance.now())}),(c,o)=>(u(),x("canvas",{ref_key:"canvas",ref:d,class:"w-full h-full object-contain pixelated"},null,512))}}),rt={class:"relative z-10 max-w-7xl mx-auto space-y-6"},dt={class:"pixel-box bg-slate-900/95 p-6"},ct={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},ut={class:"flex items-center gap-4"},xt=["src"],bt={class:"flex items-center gap-4"},mt={class:"pixel-box-sm bg-slate-800/80 px-4 py-2 text-center"},gt={class:"text-2xl font-bold text-white"},pt=["src"],vt={key:0,class:"pixel-box bg-slate-900/90 py-20 text-center"},ht={key:1,class:"pixel-box bg-slate-900/90 py-16 text-center"},ft=["src"],yt={key:2,class:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3"},_t={class:"p-4 space-y-4"},wt={class:"flex items-start gap-4"},kt={class:"relative"},Ct={class:"absolute -bottom-1 -right-1 bg-amber-600 text-white text-xs font-bold px-1.5 py-0.5 border-2 border-slate-900"},At={class:"flex-1 min-w-0"},St={class:"truncate text-lg font-bold text-white"},$t={class:"mt-1 flex items-center gap-2"},It={key:0,class:"text-xs text-slate-500"},Lt={class:"mt-2"},Nt={class:"mb-0.5 flex justify-between text-[10px]"},Rt={class:"text-slate-400"},Mt={class:"h-1.5 pixel-box-sm bg-slate-800/80 overflow-hidden"},zt={class:"mt-2 flex items-center gap-3"},Et={class:"flex items-center gap-1 text-[10px]"},Tt={class:"text-emerald-400 font-bold"},Ot={class:"flex items-center gap-1 text-[10px]"},Pt={class:"text-red-400 font-bold"},Wt={class:"flex items-center gap-1 text-[10px] ml-auto"},Vt={class:"text-amber-400 font-bold"},jt={class:"grid grid-cols-4 gap-1"},Ft={class:"text-[10px] text-slate-500 uppercase"},Bt={class:"space-y-1.5"},Ut={class:"mb-0.5 flex justify-between text-[10px]"},Gt={class:"text-slate-500 uppercase"},qt={class:"text-slate-400"},Dt={class:"h-1 pixel-box-sm bg-slate-800/80 overflow-hidden"},Ht={class:"flex gap-1"},Xt=["onClick","title"],Yt=["onClick"],Kt={class:"flex gap-2 pt-2 border-t-2 border-slate-800"},Zt=["onClick"],Jt=["onClick"],Qt=["src"],es={key:0,class:"fixed inset-0 z-100"},ts={class:"sticky top-0 z-10 pixel-box bg-slate-900/95 border-t-0 border-x-0 p-4"},ss={class:"flex items-center justify-between"},ls={class:"flex items-center gap-3"},as={class:"text-xl font-bold text-amber-400 text-shadow-retro"},ns={class:"text-sm text-slate-400"},os={class:"p-4 space-y-6"},is={key:0,class:"fixed inset-0 z-100 flex items-center justify-center p-4"},rs={key:0,class:"pixel-box bg-slate-900 w-full max-w-lg relative z-10"},ds={class:"p-4 border-b-4 border-slate-800 flex items-center gap-3"},cs=["src"],us={class:"flex justify-center"},xs={class:"relative"},bs={class:"absolute -bottom-3 left-1/2 -translate-x-1/2 whitespace-nowrap pixel-box-sm bg-slate-800 px-3 py-1 text-sm font-bold text-white"},ms={class:"pt-4"},gs={class:"mt-1 text-[10px] text-slate-600"},ps={class:"grid grid-cols-5 gap-2"},vs=["onClick"],hs={class:"text-xl"},fs={class:"flex gap-3 pt-2"},ys=["disabled"],_s={key:0,class:"flex items-center justify-center gap-2"},ws={key:1},ks={key:0,class:"fixed inset-0 z-100 flex items-center justify-center p-4"},Cs={class:"pixel-box bg-slate-900 w-full max-w-sm relative z-10 p-6"},As={class:"flex items-center gap-3 mb-4"},Ss=["src"],$s={class:"text-slate-300 mb-2"},Is={class:"text-white font-bold"},Ls={class:"flex gap-3"},Ns=ae({__name:"Roster",setup(_){const l={BG_DUNGEON:"https://vibemedia.space/bg_dungeon_roster_7x8y9z_v1.png?prompt=dark%20dungeon%20stone%20floor%20tile%20texture%20seamless&style=pixel_game_asset&key=NOGON",ICON_BARRACKS:"https://vibemedia.space/icon_barracks_1a2b3c_v1.png?prompt=medieval%20barracks%20building%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_PLUS:"https://vibemedia.space/icon_plus_gold_4d5e6f_v1.png?prompt=golden%20plus%20sign%20pixel%20art&style=pixel_game_asset&key=NOGON",ICON_HELMET_EMPTY:"https://vibemedia.space/icon_helmet_empty_7g8h9i_v1.png?prompt=empty%20knight%20helmet%20stand%20pixel%20art&style=pixel_game_asset&key=NOGON",ICON_SKULL:"https://vibemedia.space/icon_skull_red_0j1k2l_v1.png?prompt=red%20skull%20warning%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_SCROLL:"https://vibemedia.space/icon_scroll_recruit_3m4n5o_v1.png?prompt=recruitment%20scroll%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON"},d=be(),L=X(!1),k=X(""),h=X(null),b=X(null),$=X(null),B=J(()=>k.value||"preview"),R=[{id:"Fire",name:"Fire",icon:"ðŸ”¥",bgActive:"bg-orange-900/60",borderActive:"border-orange-500"},{id:"Water",name:"Water",icon:"ðŸ’§",bgActive:"bg-blue-900/60",borderActive:"border-blue-500"},{id:"Earth",name:"Earth",icon:"ðŸª¨",bgActive:"bg-amber-900/60",borderActive:"border-amber-600"},{id:"Wind",name:"Wind",icon:"ðŸ’¨",bgActive:"bg-teal-900/60",borderActive:"border-teal-500"},{id:"Lightning",name:"Lightning",icon:"âš¡",bgActive:"bg-yellow-900/60",borderActive:"border-yellow-500"}],c=i=>i&&R.find(t=>t.id===i)?.bgActive||"bg-slate-800",o=i=>({Fire:"bg-linear-to-r from-orange-600 to-red-600",Water:"bg-linear-to-r from-blue-500 to-cyan-500",Earth:"bg-linear-to-r from-amber-600 to-stone-600",Wind:"bg-linear-to-r from-teal-500 to-emerald-500",Lightning:"bg-linear-to-r from-yellow-400 to-amber-500"})[i]||"bg-slate-700",v=i=>!i.xpToNextLevel||i.xpToNextLevel===0?0:Math.min(100,i.xp/i.xpToNextLevel*100),f=i=>[{key:"power",label:"PWR",value:i.power,color:"text-red-400"},{key:"vitality",label:"VIT",value:i.vitality,color:"text-emerald-400"},{key:"armor",label:"ARM",value:i.armor,color:"text-amber-400"},{key:"speed",label:"SPD",value:i.speed,color:"text-sky-400"}],A=i=>[{key:"accuracy",label:"ACC",value:i.accuracy,percent:i.accuracy/100*100,colorClass:"bg-indigo-500"},{key:"agility",label:"AGI",value:i.agility,percent:i.agility/100*100,colorClass:"bg-purple-500"},{key:"precision",label:"PRE",value:i.precision,percent:i.precision/100*100,colorClass:"bg-pink-500"}],g=()=>{k.value="",h.value=null,L.value=!0},s=()=>{L.value=!1},a=async()=>{if(k.value.trim())try{const i=await d.addFighter(k.value);h.value&&i&&await d.updateAttunement(i.id,h.value),s()}catch{}},N=async i=>{b.value=i,await d.fetchFighterEquipment(i.id)},T=async(i,t)=>{await d.updateAttunement(i,t)},U=i=>{$.value=i},G=async()=>{$.value&&(await d.removeFighter($.value.id),$.value=null)};return xe(()=>{d.fetchFighters()}),(i,t)=>(u(),x("div",{class:"min-h-screen p-4 md:p-8 font-mono",style:F({backgroundImage:`url('${l.BG_DUNGEON}')`,backgroundSize:"128px 128px",imageRendering:"pixelated"})},[t[26]||(t[26]=e("div",{class:"pointer-events-none fixed inset-0 z-50 opacity-[0.03] bg-[repeating-linear-gradient(0deg,transparent,transparent_2px,rgba(0,0,0,0.3)_2px,rgba(0,0,0,0.3)_4px)]"},null,-1)),t[27]||(t[27]=e("div",{class:"pointer-events-none fixed inset-0 z-40 bg-[radial-gradient(ellipse_at_center,transparent_0%,rgba(0,0,0,0.4)_100%)]"},null,-1)),e("div",rt,[e("header",dt,[e("div",ct,[e("div",ut,[e("img",{src:l.ICON_BARRACKS,alt:"",class:"w-12 h-12 pixelated"},null,8,xt),t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl md:text-3xl font-bold text-amber-400 text-shadow-retro tracking-wide"}," WAR ROOM "),e("p",{class:"text-slate-400 text-sm mt-1"}," Train, equip, and prepare thy champions ")],-1))]),e("div",bt,[e("div",mt,[t[6]||(t[6]=e("div",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Warriors",-1)),e("div",gt,r(P(d).fighters.length),1)]),e("button",{onClick:g,class:"rpg-btn flex items-center gap-2"},[e("img",{src:l.ICON_PLUS,alt:"",class:"w-4 h-4 pixelated"},null,8,pt),t[7]||(t[7]=j(" RECRUIT ",-1))])])])]),P(d).isLoading&&!P(d).fighters.length?(u(),x("div",vt,[...t[8]||(t[8]=[e("div",{class:"inline-block animate-spin text-4xl mb-4"},"âš”ï¸",-1),e("p",{class:"text-amber-400 text-shadow-retro animate-pulse"},"Summoning warriors...",-1)])])):P(d).fighters.length?(u(),x("div",yt,[(u(!0),x(z,null,E(P(d).fighters,n=>(u(),x("article",{key:n.id,class:"pixel-box bg-slate-900/90 overflow-hidden group hover:border-indigo-500/50 transition-colors"},[e("div",{class:S(["h-2 w-full",n.attunementId?o(n.attunementId):"bg-slate-700"])},null,2),e("div",_t,[e("div",wt,[e("div",kt,[e("div",{class:S(["pixel-box-sm flex h-16 w-16 items-center justify-center text-3xl overflow-hidden",n.attunementId?c(n.attunementId):"bg-slate-800"])},[W(le,{seed:n.id,attunement:n.attunementId,animate:!0},null,8,["seed","attunement"])],2),e("div",Ct,r(n.level),1)]),e("div",At,[e("h3",St,r(n.name),1),e("div",$t,[t[11]||(t[11]=e("span",{class:"pixel-badge bg-emerald-900/50 border-emerald-500/50 text-emerald-400 text-xs px-2 py-0.5 flex items-center gap-1"},[e("span",{class:"w-1.5 h-1.5 rounded-full bg-emerald-400"}),j(" Ready ")],-1)),n.attunementId?(u(),x("span",It,r(n.attunementId),1)):V("",!0)]),e("div",Lt,[e("div",Nt,[t[12]||(t[12]=e("span",{class:"text-slate-500 uppercase"},"EXP",-1)),e("span",Rt,r(n.xp)+"/"+r(n.xpToNextLevel),1)]),e("div",Mt,[e("div",{class:"h-full bg-gradient-to-r from-indigo-600 to-purple-500 transition-all",style:F({width:`${v(n)}%`})},null,4)])]),e("div",zt,[e("div",Et,[e("span",Tt,r(n.matchesWon||0),1),t[13]||(t[13]=e("span",{class:"text-slate-500"},"W",-1))]),e("div",Ot,[e("span",Pt,r(n.matchesLost||0),1),t[14]||(t[14]=e("span",{class:"text-slate-500"},"L",-1))]),e("div",Wt,[e("span",Vt,r(n.totalMatches||0),1),t[15]||(t[15]=e("span",{class:"text-slate-500"},"Total",-1))])])])]),e("div",jt,[(u(!0),x(z,null,E(f(n),p=>(u(),x("div",{key:p.key,class:"pixel-box-sm bg-slate-800/60 p-1.5 text-center"},[e("div",Ft,r(p.label),1),e("div",{class:S(["text-sm font-bold",p.color])},r(p.value),3)]))),128))]),e("div",Bt,[(u(!0),x(z,null,E(A(n),p=>(u(),x("div",{key:p.key},[e("div",Ut,[e("span",Gt,r(p.label),1),e("span",qt,r(p.value),1)]),e("div",Dt,[e("div",{class:S(["h-full transition-all",p.colorClass]),style:F({width:`${p.percent}%`})},null,6)])]))),128))]),e("div",null,[t[16]||(t[16]=e("div",{class:"mb-1.5 text-[10px] font-bold uppercase tracking-wider text-slate-500"},"Attunement",-1)),e("div",Ht,[(u(),x(z,null,E(R,p=>e("button",{key:p.id,onClick:se(q=>T(n.id,p.id),["stop"]),class:S(["pixel-box-sm flex h-8 w-8 items-center justify-center text-base transition-all",n.attunementId===p.id?`${p.bgActive} border-2 ${p.borderActive}`:"bg-slate-800/50 opacity-40 hover:opacity-100 hover:bg-slate-700"]),title:p.name},r(p.icon),11,Xt)),64)),n.attunementId?(u(),x("button",{key:0,onClick:se(p=>T(n.id,null),["stop"]),class:"ml-auto rpg-btn-small text-[10px] px-2"}," CLEAR ",8,Yt)):V("",!0)])]),e("div",Kt,[e("button",{onClick:p=>N(n),class:"rpg-btn flex-1 text-sm py-2"}," MANAGE ",8,Zt),e("button",{onClick:p=>U(n),class:"rpg-btn-small bg-red-900/50 hover:bg-red-800/50 border-red-700 text-red-300 px-3"},[e("img",{src:l.ICON_SKULL,alt:"",class:"w-4 h-4 pixelated"},null,8,Qt)],8,Jt)])])]))),128))])):(u(),x("div",ht,[e("img",{src:l.ICON_HELMET_EMPTY,alt:"",class:"w-20 h-20 pixelated mx-auto mb-4 opacity-50"},null,8,ft),t[9]||(t[9]=e("h2",{class:"text-xl font-bold text-slate-400 mb-2"},"No Warriors Yet",-1)),t[10]||(t[10]=e("p",{class:"text-slate-500 text-sm mb-6"}," Thy arena awaits its first champion ",-1)),e("button",{onClick:g,class:"rpg-btn"}," RECRUIT FIRST WARRIOR ")])),(u(),ee(te,{to:"body"},[W(Z,{"enter-active-class":"transition duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:K(()=>[b.value?(u(),x("div",es,[e("div",{class:"absolute inset-0 bg-black/80",onClick:t[0]||(t[0]=n=>b.value=null)}),W(Z,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:K(()=>[b.value?(u(),x("aside",{key:0,class:"absolute right-0 top-0 h-full w-full max-w-xl overflow-y-auto pixel-box bg-slate-900 border-l-4 border-slate-700",style:F({backgroundImage:`url('${l.BG_DUNGEON}')`,backgroundSize:"64px 64px",imageRendering:"pixelated"})},[e("div",ts,[e("div",ss,[e("div",ls,[e("div",{class:S(["pixel-box-sm flex h-12 w-12 items-center justify-center overflow-hidden",b.value.attunementId?c(b.value.attunementId):"bg-slate-800"])},[W(le,{seed:b.value.id,attunement:b.value.attunementId,animate:!0},null,8,["seed","attunement"])],2),e("div",null,[e("h2",as,r(b.value.name),1),e("p",ns,"Level "+r(b.value.level)+" Warrior",1)])]),e("button",{onClick:t[1]||(t[1]=n=>b.value=null),class:"rpg-btn-small text-lg px-2 py-1"}," âœ• ")])]),e("div",os,[W(at,{fighter:b.value,equipment:P(d).equipment[b.value.id]||[]},null,8,["fighter","equipment"])])],4)):V("",!0)]),_:1})])):V("",!0)]),_:1})])),(u(),ee(te,{to:"body"},[W(Z,{"enter-active-class":"transition duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:K(()=>[L.value?(u(),x("div",is,[e("div",{class:"absolute inset-0 bg-black/80",onClick:s}),W(Z,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:K(()=>[L.value?(u(),x("div",rs,[e("div",ds,[e("img",{src:l.ICON_SCROLL,alt:"",class:"w-6 h-6 pixelated"},null,8,cs),t[17]||(t[17]=e("div",null,[e("h2",{class:"text-xl font-bold text-amber-400 text-shadow-retro"},"RECRUIT WARRIOR"),e("p",{class:"text-xs text-slate-500"},"Create a new champion")],-1))]),e("form",{onSubmit:se(a,["prevent"]),class:"p-6 space-y-6"},[e("div",us,[e("div",xs,[e("div",{class:S(["pixel-box flex h-24 w-24 items-center justify-center transition-all overflow-hidden",h.value?c(h.value):"bg-slate-800"])},[W(le,{seed:B.value,attunement:h.value,animate:!0},null,8,["seed","attunement"])],2),e("div",bs,r(k.value||"Unnamed"),1)])]),e("div",ms,[t[18]||(t[18]=e("label",{class:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2"},"Fighter Name",-1)),he(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>k.value=n),type:"text",placeholder:"Enter a legendary name...",required:"",minlength:"2",maxlength:"24",class:"w-full pixel-box-sm bg-slate-800 px-4 py-3 text-lg text-white placeholder-slate-600 focus:border-amber-500 focus:outline-none"},null,512),[[fe,k.value]]),e("p",gs,r(k.value.length)+"/24 characters",1)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2"},"Starting Attunement (Optional)",-1)),e("div",ps,[(u(),x(z,null,E(R,n=>e("button",{key:n.id,type:"button",onClick:p=>h.value=h.value===n.id?null:n.id,class:S(["pixel-box-sm flex flex-col items-center gap-1 p-3 transition-all",h.value===n.id?`${n.bgActive} ${n.borderActive}`:"bg-slate-800/60 hover:bg-slate-700"])},[e("span",hs,r(n.icon),1),e("span",{class:S(["text-[10px] font-bold",h.value===n.id?"text-white":"text-slate-500"])},r(n.name),3)],10,vs)),64))])]),t[21]||(t[21]=e("div",{class:"pixel-box-sm bg-slate-800/50 p-3 flex gap-3"},[e("span",{class:"text-indigo-400"},"â„¹ï¸"),e("p",{class:"text-xs text-slate-400"}," Thy fighter shall begin at Level 1. Win battles to earn XP! ")],-1)),e("div",fs,[e("button",{type:"button",onClick:s,class:"rpg-btn-small flex-1"}," CANCEL "),e("button",{type:"submit",disabled:P(d).isLoading||!k.value.trim(),class:S(["rpg-btn flex-1",{"opacity-50 cursor-not-allowed":P(d).isLoading||!k.value.trim()}])},[P(d).isLoading?(u(),x("span",_s,[...t[20]||(t[20]=[e("span",{class:"animate-spin"},"âš™ï¸",-1),j(" RECRUITING... ",-1)])])):(u(),x("span",ws,"RECRUIT"))],10,ys)])],32)])):V("",!0)]),_:1})])):V("",!0)]),_:1})])),(u(),ee(te,{to:"body"},[W(Z,{"enter-active-class":"transition duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:K(()=>[$.value?(u(),x("div",ks,[e("div",{class:"absolute inset-0 bg-black/80",onClick:t[3]||(t[3]=n=>$.value=null)}),e("div",Cs,[e("div",As,[e("img",{src:l.ICON_SKULL,alt:"",class:"w-8 h-8 pixelated"},null,8,Ss),t[22]||(t[22]=e("h3",{class:"text-lg font-bold text-red-400 text-shadow-retro"},"DISMISS WARRIOR",-1))]),e("p",$s,[t[23]||(t[23]=j(" Art thou certain about dismissing ",-1)),e("span",Is,r($.value.name),1),t[24]||(t[24]=j("? ",-1))]),t[25]||(t[25]=e("div",{class:"pixel-box-sm bg-red-900/20 border-red-500/30 p-3 mb-6 flex gap-2"},[e("span",null,"âš ï¸"),e("p",{class:"text-xs text-red-200"}," This cannot be undone. All progress shall be lost. ")],-1)),e("div",Ls,[e("button",{onClick:t[4]||(t[4]=n=>$.value=null),class:"rpg-btn-small flex-1"}," CANCEL "),e("button",{onClick:G,class:"rpg-btn flex-1 bg-red-700 hover:bg-red-600 border-red-800"}," DISMISS ")])])])):V("",!0)]),_:1})]))])],4))}}),Es=ye(Ns,[["__scopeId","data-v-a1995446"]]);export{Es as default};
