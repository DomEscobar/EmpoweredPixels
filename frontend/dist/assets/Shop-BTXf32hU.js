import{d as C,M as T,o as t,c as a,n as k,a as e,t as i,x as p,_ as I,j as b,e as _,q as G,A as L,k as q,l as w,g,N as E,w as R,F as $,s as P,p as H,y as O,f as D}from"./index-Cwji7ajR.js";const V={class:"gold-info"},A={class:"gold-amount"},z=C({__name:"GoldDisplay",setup(n){const s=T(),o=p(()=>(s.goldBalance?.balance||0).toLocaleString()),h=p(()=>s.loading);return(m,u)=>(t(),a("div",{class:k(["gold-display",{"is-loading":h.value}])},[u[1]||(u[1]=e("div",{class:"gold-icon"},[e("span",{class:"icon"},"ðŸª™")],-1)),e("div",V,[e("span",A,i(o.value),1),u[0]||(u[0]=e("span",{class:"gold-label"},"Gold",-1))])],2))}}),F=I(z,[["__scopeId","data-v-3ba6befd"]]),Y={class:"package-header"},j={key:0,class:"popular-badge"},W={key:1,class:"value-badge"},J={class:"package-name"},K={class:"gold-amount"},Q={class:"amount"},U={key:0,class:"bonus-badge"},X={class:"package-footer"},Z={class:"price"},ee=["disabled"],se=C({__name:"GoldPackageCard",props:{item:{}},emits:["purchase"],setup(n){const s=n,o=T(),h=p(()=>{const c=s.item.gold_amount||0;return c>=6500?"legendary":c>=1200?"epic":c>=550?"rare":"common"}),m=p(()=>s.item.name.includes("Satchel")),u=p(()=>s.item.name.includes("Hoard")),f=p(()=>{const c=s.item.metadata||{};return c.bonus_percent?c.bonus_percent:s.item.name.includes("Hoard")?30:s.item.name.includes("Chest")?20:s.item.name.includes("Satchel")?10:0}),v=p(()=>o.formatItemPrice(s.item));return(c,r)=>(t(),a("div",{class:k(["gold-package",`tier-${h.value}`])},[e("div",Y,[m.value?(t(),a("span",j,"Most Popular")):b("",!0),u.value?(t(),a("span",W,"Best Value")):b("",!0),e("h3",J,i(n.item.name),1)]),e("div",K,[r[1]||(r[1]=e("span",{class:"gold-icon"},"ðŸª™",-1)),e("span",Q,i(n.item.gold_amount?.toLocaleString()),1),r[2]||(r[2]=e("span",{class:"gold-label"},"Gold",-1))]),f.value>0?(t(),a("div",U," +"+i(f.value)+"% Bonus ",1)):b("",!0),e("div",X,[e("span",Z,i(v.value),1),e("button",{class:"buy-button",disabled:_(o).purchaseInProgress,onClick:r[0]||(r[0]=x=>c.$emit("purchase",n.item.id))},i(_(o).purchaseInProgress?"Processing...":"Buy"),9,ee)])],2))}}),te=I(se,[["__scopeId","data-v-ffb7a890"]]),ae={class:"bundle-name"},oe={class:"bundle-content"},ne={class:"bundle-description"},ie={key:0,class:"bonus-gold"},le={class:"bonus-amount"},ce={key:1,class:"bonus-item"},re={key:2,class:"bonus-item"},de={class:"bundle-footer"},ue={class:"price"},me=["disabled"],pe=C({__name:"BundleCard",props:{item:{}},emits:["purchase"],setup(n){const s=n,o=T(),h=p(()=>o.getRarityColor(s.item.rarity)),m=p(()=>o.getRarityName(s.item.rarity)),u=p(()=>o.formatItemPrice(s.item)),f=p(()=>o.purchaseInProgress?!0:s.item.price_currency==="gold"?o.hasInsufficientGold(s.item):!1),v=p(()=>o.purchaseInProgress?"Processing...":s.item.price_currency==="gold"&&o.hasInsufficientGold(s.item)?"Insufficient Gold":"Buy Now");return(c,r)=>(t(),a("div",{class:"bundle-card",style:G({borderColor:h.value})},[e("div",{class:"bundle-header",style:G({backgroundColor:h.value+"20"})},[e("span",{class:"rarity-badge",style:G({backgroundColor:h.value})},i(m.value),5),e("h3",ae,i(n.item.name),1)],4),e("div",oe,[e("p",ne,i(n.item.description),1),n.item.gold_amount?(t(),a("div",ie,[r[1]||(r[1]=e("span",{class:"bonus-icon"},"+",-1)),e("span",le,i(n.item.gold_amount.toLocaleString())+" Gold",1)])):b("",!0),n.item.metadata?.drop_boosts?(t(),a("div",ce,[r[2]||(r[2]=e("span",{class:"bonus-icon"},"ðŸŽ",-1)),e("span",null,i(n.item.metadata.drop_boosts)+" Drop Boosts",1)])):b("",!0),n.item.metadata?.equipment_count?(t(),a("div",re,[r[3]||(r[3]=e("span",{class:"bonus-icon"},"âš”ï¸",-1)),e("span",null,i(n.item.metadata.equipment_count)+" Equipment Items",1)])):b("",!0)]),e("div",de,[e("span",ue,i(u.value),1),e("button",{class:"buy-button",disabled:f.value,onClick:r[0]||(r[0]=x=>c.$emit("purchase",n.item.id))},i(v.value),9,me)])],4))}}),he=I(pe,[["__scopeId","data-v-271cfe96"]]),_e={class:"modal-content"},ve={key:0,class:"modal-body"},ge={class:"price-tag"},fe={class:"balance-info"},be={class:"balance-row"},ye={class:"balance"},ke={key:0,class:"balance-row"},$e={class:"modal-actions"},Pe=["disabled"],Ce={key:0},Ie={key:1},Se=C({__name:"PurchaseModal",props:{isOpen:{type:Boolean},item:{}},emits:["close","success"],setup(n,{emit:s}){const o=n,h=s,m=T(),u=w(null),f=p(()=>o.item?m.getRarityColor(o.item.rarity):"#9ca3af"),v=p(()=>o.item?m.formatItemPrice(o.item):""),c=p(()=>m.goldBalance?.balance||0),r=p(()=>o.item?.price_currency==="gold"),x=p(()=>!r.value||!o.item?!0:c.value>=o.item.price_amount),M=p(()=>m.purchaseInProgress?!1:r.value?x.value:!0);async function y(){!o.item||!M.value||(u.value=await m.purchaseItem(o.item.id),u.value.success&&setTimeout(()=>{h("success",u.value),d()},1500))}function d(){u.value=null,h("close")}return L(()=>o.isOpen,l=>{l||(u.value=null)}),(l,S)=>n.isOpen?(t(),a("div",{key:0,class:"modal-overlay",onClick:q(d,["self"])},[e("div",_e,[e("div",{class:"modal-header"},[S[0]||(S[0]=e("h2",null,"Confirm Purchase",-1)),e("button",{class:"close-button",onClick:d},"Ã—")]),n.item?(t(),a("div",ve,[e("div",{class:"item-preview",style:G({borderColor:f.value})},[e("h3",null,i(n.item.name),1),e("p",null,i(n.item.description),1),e("div",ge,i(v.value),1)],4),e("div",fe,[e("div",be,[S[1]||(S[1]=e("span",null,"Current Balance:",-1)),e("span",ye,i(c.value.toLocaleString())+" Gold",1)]),r.value?(t(),a("div",ke,[S[2]||(S[2]=e("span",null,"After Purchase:",-1)),e("span",{class:k(["balance",x.value?"positive":"negative"])},i((c.value-n.item.price_amount).toLocaleString())+" Gold ",3)])):b("",!0)]),u.value?(t(),a("div",{key:0,class:k(["result-message",u.value.success?"success":"error"])},i(u.value.message),3)):b("",!0),e("div",$e,[e("button",{class:"cancel-button",onClick:d},"Cancel"),e("button",{class:"confirm-button",disabled:!M.value||_(m).purchaseInProgress,onClick:y},[_(m).purchaseInProgress?(t(),a("span",Ce,"Processing...")):(t(),a("span",Ie,"Confirm Purchase"))],8,Pe)])])):b("",!0)])])):b("",!0)}}),Be=I(Se,[["__scopeId","data-v-a0966da3"]]),xe=C({__name:"Skeleton",props:{width:{},height:{},circle:{type:Boolean},borderRadius:{}},setup(n){const s=n,o=p(()=>({width:s.width||"100%",height:s.height||"1rem",borderRadius:s.borderRadius||(s.circle?"50%":"4px")}));return(h,m)=>(t(),a("div",{class:k(["skeleton",{circle:n.circle}]),style:G(o.value)},null,6))}}),B=I(xe,[["__scopeId","data-v-e202036b"]]),we={class:"toast-container"},Ge=["onClick"],Te={class:"toast-icon"},Me={class:"toast-message"},Ne=C({__name:"ToastManager",setup(n,{expose:s}){const o=w([]);let h=0;function m(f,v="success",c=3e3){const r=h++;o.value.push({id:r,message:f,type:v}),c>0&&setTimeout(()=>{u(r)},c)}function u(f){const v=o.value.findIndex(c=>c.id===f);v!==-1&&o.value.splice(v,1)}return s({addToast:m}),(f,v)=>(t(),a("div",we,[g(E,{name:"toast"},{default:R(()=>[(t(!0),a($,null,P(o.value,c=>(t(),a("div",{key:c.id,class:k(["toast",c.type]),onClick:r=>u(c.id)},[e("span",Te,i(c.type==="success"?"âœ…":"âŒ"),1),e("span",Me,i(c.message),1)],10,Ge))),128))]),_:1})]))}}),De=I(Ne,[["__scopeId","data-v-0b8ad245"]]),Le={class:"empty-state"},qe={class:"empty-icon"},Ee={class:"empty-title"},Re={class:"empty-message"},He=C({__name:"EmptyState",props:{icon:{},title:{},message:{}},setup(n){return(s,o)=>(t(),a("div",Le,[e("div",qe,i(n.icon),1),e("h3",Ee,i(n.title),1),e("p",Re,i(n.message),1),H(s.$slots,"default",{},void 0,!0)]))}}),N=I(He,[["__scopeId","data-v-5dd80248"]]),Oe={class:"shop-page"},Ve={class:"shop-header"},Ae={class:"shop-tabs"},ze=["onClick"],Fe={class:"shop-content"},Ye={key:0,class:"tab-content"},je={key:0,class:"gold-grid"},We={class:"skeleton-footer"},Je={key:1,class:"error"},Ke={key:2,class:"empty-state-wrapper"},Qe={key:3,class:"gold-grid"},Ue={key:1,class:"tab-content"},Xe={key:0,class:"bundles-grid"},Ze={class:"skeleton-footer"},es={key:1,class:"error"},ss={key:2,class:"empty-state-wrapper"},ts={key:3,class:"bundles-grid"},as={key:2,class:"tab-content"},os={key:0,class:"transactions-list"},ns={key:1,class:"empty-state-wrapper"},is={key:2,class:"transactions-list"},ls={class:"tx-info"},cs={class:"tx-name"},rs={class:"tx-date"},ds=C({__name:"Shop",setup(n){const s=T(),o=w("gold"),h=w(!1),m=w(null),u=w(null),f=[{id:"gold",label:"Gold"},{id:"bundles",label:"Bundles"},{id:"history",label:"History"}];O(()=>{v()}),L(o,()=>{v()});function v(){s.fetchGoldBalance(),o.value==="gold"?s.goldPackages.length===0&&s.fetchGoldPackages():o.value==="bundles"?s.bundles.length===0&&s.fetchBundles():o.value==="history"&&s.fetchTransactions()}function c(y){const d=[...s.goldPackages,...s.bundles].find(l=>l.id===y);if(d){if(d.price_currency==="gold"&&s.hasInsufficientGold(d)){u.value?.addToast(`Insufficient Gold to purchase ${d.name}`,"error");return}m.value=d,h.value=!0}}function r(){h.value=!1,m.value=null}function x(y){u.value?.addToast(y.message||"Purchase successful!","success"),console.log("Purchase successful:",y)}function M(y){return new Date(y).toLocaleDateString()}return(y,d)=>(t(),a("div",Oe,[e("header",Ve,[d[0]||(d[0]=e("h1",null,"ðŸª Shop",-1)),g(F)]),e("nav",Ae,[(t(),a($,null,P(f,l=>e("button",{key:l.id,class:k(["tab",{active:o.value===l.id}]),onClick:S=>o.value=l.id},i(l.label),11,ze)),64))]),e("main",Fe,[o.value==="gold"?(t(),a("section",Ye,[d[1]||(d[1]=e("h2",null,"Gold Emporium",-1)),d[2]||(d[2]=e("p",{class:"tab-description"},"Purchase gold for upgrades and items",-1)),_(s).loading?(t(),a("div",je,[(t(),a($,null,P(4,l=>e("div",{key:l,class:"skeleton-card"},[g(B,{height:"160px","border-radius":"16px"}),e("div",We,[g(B,{width:"40%",height:"24px"}),g(B,{width:"30%",height:"32px"})])])),64))])):_(s).error?(t(),a("div",Je,i(_(s).error),1)):_(s).goldPackages.length===0?(t(),a("div",Ke,[g(N,{icon:"ðŸª™",title:"No Gold Packages",message:"The gold emporium is currently empty. Check back later!"})])):(t(),a("div",Qe,[(t(!0),a($,null,P(_(s).goldPackages,l=>(t(),D(te,{key:l.id,item:l,onPurchase:c},null,8,["item"]))),128))]))])):b("",!0),o.value==="bundles"?(t(),a("section",Ue,[d[3]||(d[3]=e("h2",null,"Equipment Bundles",-1)),d[4]||(d[4]=e("p",{class:"tab-description"},"Curated bundles with guaranteed rarity items",-1)),_(s).loading?(t(),a("div",Xe,[(t(),a($,null,P(3,l=>e("div",{key:l,class:"skeleton-card"},[g(B,{height:"200px","border-radius":"12px"}),e("div",Ze,[g(B,{width:"40%",height:"24px"}),g(B,{width:"30%",height:"32px"})])])),64))])):_(s).error?(t(),a("div",es,i(_(s).error),1)):_(s).bundles.length===0?(t(),a("div",ss,[g(N,{icon:"ðŸ“¦",title:"No Bundles Available",message:"We're currently out of equipment bundles. Our blacksmith is working hard!"})])):(t(),a("div",ts,[(t(!0),a($,null,P(_(s).bundles,l=>(t(),D(he,{key:l.id,item:l,onPurchase:c},null,8,["item"]))),128))]))])):b("",!0),o.value==="history"?(t(),a("section",as,[d[5]||(d[5]=e("h2",null,"Purchase History",-1)),d[6]||(d[6]=e("p",{class:"tab-description"},"Your recent transactions",-1)),_(s).loading?(t(),a("div",os,[(t(),a($,null,P(5,l=>g(B,{key:l,height:"64px","border-radius":"8px"})),64))])):_(s).transactions.length===0?(t(),a("div",ns,[g(N,{icon:"ðŸ“œ",title:"No History",message:"You haven't made any purchases yet."})])):(t(),a("div",is,[(t(!0),a($,null,P(_(s).transactions,l=>(t(),a("div",{key:l.id,class:k(["transaction",l.status])},[e("div",ls,[e("span",cs,i(l.item_name),1),e("span",rs,i(M(l.created)),1)]),e("div",{class:k(["tx-amount",{negative:l.gold_change<0}])},i(l.gold_change>0?"+":"")+i(l.gold_change)+" Gold ",3)],2))),128))]))])):b("",!0)]),g(Be,{"is-open":h.value,item:m.value,onClose:r,onSuccess:x},null,8,["is-open","item"]),g(De,{ref_key:"toastManager",ref:u},null,512)]))}}),ms=I(ds,[["__scopeId","data-v-a31891c2"]]);export{ms as default};
