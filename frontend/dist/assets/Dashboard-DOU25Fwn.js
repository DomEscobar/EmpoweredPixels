import{u as I}from"./store-PtautCur.js";import{C as N,D as O,E as k,u as h,d as E,y as C,e as a,o as r,c as i,a as e,t as n,j as R,g as p,b as v,n as f,w as m,F as A,s as T,q as $,x as M,r as G,_ as j}from"./index-DzKNk8gt.js";import{u as D}from"./store-DcP1Tn00.js";import{u as B}from"./store-B5yaT8O9.js";async function P(o,s=1,d=20,c){return N(`${O.match}/browse`,{method:"POST",token:o,body:{page:s,pageSize:d,status:c}})}async function F(o){try{return await N(`${O.match}/current`,{token:o})}catch{return null}}const z=k("matches",{state:()=>({currentMatch:null,recentMatches:[],isLoading:!1,error:null}),actions:{async fetchCurrentMatch(){const o=h();if(o.token){this.isLoading=!0;try{const s=await F(o.token);this.currentMatch=s??null}catch{this.currentMatch=null}finally{this.isLoading=!1}}},async fetchRecentMatches(){const o=h();if(o.token){this.isLoading=!0;try{const s=await P(o.token,1,5,"completed");this.recentMatches=s.items||[]}catch{this.error="Failed to load match history"}finally{this.isLoading=!1}}}}}),w="",y={double_drops:{name:"Double Drops",icon:"ðŸ“¦",color:"text-purple-400"},double_xp:{name:"Double XP",icon:"âš¡",color:"text-yellow-400"},bonus_gold:{name:"Bonus Gold",icon:"ðŸ’°",color:"text-amber-400"},half_price:{name:"Half Price",icon:"ðŸ·ï¸",color:"text-green-400"}};async function H(o){const s=await fetch(`${w}/api/events/current`,{headers:{Authorization:`Bearer ${o}`}});if(!s.ok)throw new Error("Failed to fetch events");return s.json()}async function V(o){const s=await fetch(`${w}/api/events/status`,{headers:{Authorization:`Bearer ${o}`}});if(!s.ok)throw new Error("Failed to fetch event status");return s.json()}async function W(o){const s=await fetch(`${w}/api/events/next`,{headers:{Authorization:`Bearer ${o}`}});if(!s.ok)throw new Error("Failed to fetch next event");return s.json()}const U=k("events",{state:()=>({currentEvents:[],eventStatus:null,nextEvent:null,isLoading:!1,error:null}),getters:{hasActiveEvent:o=>o.eventStatus?.has_active_event??!1,activeMultiplier:o=>o.eventStatus?.multiplier??1,activeEventType:o=>o.eventStatus?.type,timeRemaining:o=>o.eventStatus?.time_remaining},actions:{async fetchCurrentEvents(){const o=h();if(o.token){this.isLoading=!0;try{this.currentEvents=await H(o.token)}catch(s){this.error=s.message}finally{this.isLoading=!1}}},async fetchEventStatus(){const o=h();if(o.token)try{this.eventStatus=await V(o.token)}catch(s){console.error("Failed to fetch event status",s)}},async fetchNextEvent(){const o=h();if(o.token)try{this.nextEvent=await W(o.token)}catch(s){console.error("Failed to fetch next event",s)}},async refreshAll(){await Promise.all([this.fetchCurrentEvents(),this.fetchEventStatus(),this.fetchNextEvent()])}}}),Y={key:0,class:"pixel-box bg-gradient-to-r from-purple-900/50 to-amber-900/50 border-amber-500/50 p-4 mb-6"},q={class:"flex items-center justify-between"},K={class:"flex items-center gap-4"},X={class:"text-4xl animate-pulse"},J={class:"text-lg font-black text-amber-400 uppercase tracking-wider"},Q={class:"text-sm text-slate-300"},Z={class:"text-right"},ee={class:"text-2xl font-mono font-bold text-amber-400"},te={key:1,class:"pixel-box bg-slate-900/50 border-slate-700/50 p-3 mb-6"},se={class:"flex items-center justify-between"},oe={class:"flex items-center gap-3"},ae={class:"text-sm font-bold text-amber-400 ml-2"},le={class:"text-xs text-slate-500"},ne=E({__name:"EventBanner",setup(o){const s=U();function d(c){const l=Math.floor(c/36e5),g=Math.floor(c%36e5/6e4);return l>0?`${l}h ${g}m`:`${g}m`}return C(()=>{s.refreshAll(),setInterval(()=>s.refreshAll(),6e4)}),(c,l)=>a(s).hasActiveEvent?(r(),i("div",Y,[e("div",q,[e("div",K,[e("div",X,n(a(y)[a(s).activeEventType||""]?.icon||"ðŸŽ‰"),1),e("div",null,[e("h3",J,n(a(y)[a(s).activeEventType||""]?.name||"Special Event")+" Active! ",1),e("p",Q,n(a(s).activeMultiplier)+"x rewards for a limited time! ",1)])]),e("div",Z,[l[0]||(l[0]=e("div",{class:"text-xs text-slate-400 uppercase"},"Ends in",-1)),e("div",ee,n(a(s).timeRemaining),1)])])])):a(s).nextEvent?(r(),i("div",te,[e("div",se,[e("div",oe,[l[2]||(l[2]=e("span",{class:"text-2xl"},"ðŸ“…",-1)),e("div",null,[l[1]||(l[1]=e("span",{class:"text-sm text-slate-400"},"Next Event:",-1)),e("span",ae,n(a(s).nextEvent.event.name),1)])]),e("div",le," Starts in "+n(d(a(s).nextEvent.wait_ms)),1)])])):R("",!0)}}),re={class:"relative z-10 max-w-7xl mx-auto space-y-6"},ie={class:"pixel-box bg-slate-900/95 p-6"},ce={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},de={class:"flex items-center gap-4"},pe=["src"],xe={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},me={class:"pixel-box bg-slate-900/90 p-4 group hover:bg-slate-900/95 transition-colors"},_e={class:"flex items-center justify-between"},ue={class:"mt-2 text-3xl font-bold text-white text-shadow-retro"},ge={class:"p-3 pixel-box-sm bg-indigo-900/30 border-indigo-500/30 group-hover:border-indigo-400/50 transition-colors"},he=["src"],be={class:"pixel-box bg-slate-900/90 p-4 group hover:bg-slate-900/95 transition-colors"},ve={class:"flex items-center justify-between"},fe={class:"mt-2 text-3xl font-bold text-white text-shadow-retro"},we={class:"p-3 pixel-box-sm bg-purple-900/30 border-purple-500/30 group-hover:border-purple-400/50 transition-colors"},ye=["src"],Ne={class:"pixel-box bg-slate-900/90 p-4 group hover:bg-slate-900/95 transition-colors"},Oe={class:"flex items-center justify-between"},ke={class:"mt-2 text-3xl font-bold text-white text-shadow-retro"},Ee={class:"p-3 pixel-box-sm bg-pink-900/30 border-pink-500/30 group-hover:border-pink-400/50 transition-colors"},Ce=["src"],Se={class:"flex items-center justify-between"},Le={class:"mt-2 text-3xl font-bold text-white text-shadow-retro"},Ie=["src"],Re={class:"mt-4"},Ae={key:1,class:"text-xs text-slate-600"},Te={class:"grid gap-6 lg:grid-cols-3"},$e={class:"lg:col-span-2"},Me={class:"pixel-box bg-slate-900/90 h-full"},Ge={class:"p-4 border-b-4 border-slate-800 flex items-center justify-between"},je={class:"flex items-center gap-3"},De=["src"],Be={class:"p-4"},Pe={key:0,class:"py-12 text-center"},Fe={key:1,class:"py-12 text-center"},ze=["src"],He={key:2,class:"space-y-2 max-h-80 overflow-y-auto custom-scrollbar"},Ve={class:"flex items-center gap-3"},We={class:"font-bold text-slate-200 text-sm"},Ue={class:"text-xs text-slate-500"},Ye={class:"space-y-6"},qe={class:"pixel-box bg-slate-900/90"},Ke={class:"p-4 border-b-4 border-slate-800 flex items-center gap-3"},Xe=["src"],Je={class:"p-4"},Qe={key:0,class:"text-center"},Ze={class:"relative inline-block"},et={class:"pixel-box-sm w-20 h-20 mx-auto flex items-center justify-center bg-slate-800/80 border-indigo-500/50 mb-3"},tt=["src"],st={class:"absolute -bottom-1 -right-1 bg-indigo-600 text-white text-xs px-2 py-0.5 font-bold border-2 border-slate-900"},ot={class:"text-lg font-bold text-white mt-2"},at={class:"mt-2"},lt={class:"pixel-badge bg-slate-800 text-slate-300 px-2 py-1 text-xs border-slate-600"},nt={key:1,class:"py-6 text-center"},rt={class:"pixel-box bg-slate-900/90"},it={class:"p-4 grid grid-cols-2 gap-3"},ct=["src"],dt=["src"],pt=["src"],xt=["src"],mt=E({__name:"Dashboard",setup(o){const s={BG_DUNGEON:"https://vibemedia.space/bg_dungeon_dash_5y6t7u_v1.png?prompt=dark%20dungeon%20stone%20floor%20tile%20texture%20seamless&style=pixel_game_asset&key=NOGON",ICON_CASTLE:"https://vibemedia.space/icon_castle_cmd_8i9o0p_v1.png?prompt=medieval%20castle%20tower%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_KNIGHT:"https://vibemedia.space/icon_knight_1a2s3d_v1.png?prompt=armored%20knight%20helmet%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_FLAG:"https://vibemedia.space/icon_flag_war_4f5g6h_v1.png?prompt=war%20banner%20flag%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_SWORDS:"https://vibemedia.space/icon_crossed_swords_7j8k9l_v1.png?prompt=crossed%20steel%20swords%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_CHEST:"https://vibemedia.space/icon_chest_gold_0m1n2b_v1.png?prompt=golden%20treasure%20chest%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_SCROLL:"https://vibemedia.space/icon_scroll_log_3v4c5x_v1.png?prompt=ancient%20scroll%20with%20writing%20pixel%20art&style=pixel_game_asset&key=NOGON",ICON_SCROLL_EMPTY:"https://vibemedia.space/icon_scroll_blank_6z7a8s_v1.png?prompt=blank%20parchment%20scroll%20pixel%20art&style=pixel_game_asset&key=NOGON",ICON_CROWN:"https://vibemedia.space/icon_crown_gold_9d0f1g_v1.png?prompt=golden%20royal%20crown%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_WARRIOR:"https://vibemedia.space/icon_warrior_elite_2h3j4k_v1.png?prompt=elite%20warrior%20knight%20pixel%20art%20character&style=pixel_game_asset&key=NOGON",ICON_TROPHY:"https://vibemedia.space/icon_trophy_league_5l6p7q_v1.png?prompt=golden%20trophy%20cup%20pixel%20art&style=pixel_game_asset&key=NOGON"},d=I(),c=z(),l=D(),g=B(),b=M(()=>d.fighters.length?[...d.fighters].sort((_,t)=>t.level!==_.level?t.level-_.level:t.power-_.power)[0]:null),S=_=>new Date(_).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),L=async()=>{await l.claimAll()};return C(()=>{Promise.all([d.fetchFighters(),c.fetchRecentMatches(),l.fetchRewards(),g.fetchLeagues()])}),(_,t)=>{const x=G("router-link");return r(),i("div",{class:"min-h-screen p-4 md:p-8 font-mono",style:$({backgroundImage:`url('${s.BG_DUNGEON}')`,backgroundSize:"128px 128px",imageRendering:"pixelated"})},[t[22]||(t[22]=e("div",{class:"pointer-events-none fixed inset-0 z-50 opacity-[0.03] bg-[repeating-linear-gradient(0deg,transparent,transparent_2px,rgba(0,0,0,0.3)_2px,rgba(0,0,0,0.3)_4px)]"},null,-1)),t[23]||(t[23]=e("div",{class:"pointer-events-none fixed inset-0 z-40 bg-[radial-gradient(ellipse_at_center,transparent_0%,rgba(0,0,0,0.4)_100%)]"},null,-1)),e("div",re,[e("header",ie,[e("div",ce,[e("div",de,[e("img",{src:s.ICON_CASTLE,alt:"",class:"w-14 h-14 pixelated"},null,8,pe),t[0]||(t[0]=e("div",null,[e("h1",{class:"text-2xl md:text-3xl font-bold text-amber-400 text-shadow-retro tracking-wide"}," COMMAND CENTER "),e("p",{class:"text-slate-400 text-sm mt-1"}," Welcome back, Commander. All systems operational. ")],-1))]),t[1]||(t[1]=e("div",{class:"pixel-box-sm bg-emerald-900/30 border-emerald-500/50 px-4 py-2 flex items-center gap-2"},[e("div",{class:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e("span",{class:"text-emerald-400 text-xs font-bold uppercase tracking-wider"},"Online")],-1))])]),p(ne),e("div",xe,[e("div",me,[e("div",_e,[e("div",null,[t[2]||(t[2]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Active Roster",-1)),e("p",ue,n(a(d).fighters.length),1)]),e("div",ge,[e("img",{src:s.ICON_KNIGHT,alt:"",class:"w-8 h-8 pixelated"},null,8,he)])]),t[3]||(t[3]=e("div",{class:"mt-4 h-2 pixel-box-sm bg-slate-800/80 overflow-hidden"},[e("div",{class:"h-full bg-linear-to-r from-indigo-600 to-indigo-400",style:{width:"75%"}})],-1))]),e("div",be,[e("div",ve,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Active Campaigns",-1)),e("p",fe,n(a(g).activeLeagueCount),1)]),e("div",we,[e("img",{src:s.ICON_FLAG,alt:"",class:"w-8 h-8 pixelated"},null,8,ye)])]),t[5]||(t[5]=e("div",{class:"mt-4 flex items-center text-xs"},[e("span",{class:"flex items-center gap-1 text-emerald-400 font-bold"},[e("span",{class:"w-1.5 h-1.5 rounded-full bg-emerald-400"}),v(" LIVE ")]),e("span",{class:"text-slate-500 ml-2"},"Season 1")],-1))]),e("div",Ne,[e("div",Oe,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Combat Record",-1)),e("p",ke,n(a(c).recentMatches.length),1)]),e("div",Ee,[e("img",{src:s.ICON_SWORDS,alt:"",class:"w-8 h-8 pixelated"},null,8,Ce)])]),t[7]||(t[7]=e("div",{class:"mt-4 text-xs text-slate-500"}," Recent engagements ",-1))]),e("div",{class:f(["pixel-box bg-slate-900/90 p-4 group transition-all",a(l).rewardCount>0?"border-amber-500/50 shadow-lg shadow-amber-500/10":""])},[e("div",Se,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Pending Rewards",-1)),e("p",Le,n(a(l).rewardCount),1)]),e("div",{class:f(["p-3 pixel-box-sm bg-amber-900/30 border-amber-500/30 transition-colors",a(l).rewardCount>0?"animate-pulse border-amber-400/60":""])},[e("img",{src:s.ICON_CHEST,alt:"",class:"w-8 h-8 pixelated"},null,8,Ie)],2)]),e("div",Re,[a(l).rewardCount>0?(r(),i("button",{key:0,class:"rpg-btn w-full text-sm py-2",onClick:L}," CLAIM ALL ")):(r(),i("p",Ae,"No pending rewards"))])],2)]),e("div",Te,[e("div",$e,[e("div",Me,[e("div",Ge,[e("div",je,[e("img",{src:s.ICON_SCROLL,alt:"",class:"w-5 h-5 pixelated"},null,8,De),t[9]||(t[9]=e("h3",{class:"text-lg font-bold text-amber-300"},"BATTLE LOG",-1))]),p(x,{to:"/matches",class:"rpg-btn-small"},{default:m(()=>[...t[10]||(t[10]=[v(" VIEW ALL ",-1)])]),_:1})]),e("div",Be,[a(c).isLoading?(r(),i("div",Pe,[...t[11]||(t[11]=[e("div",{class:"inline-block animate-spin text-3xl mb-3"},"âš”ï¸",-1),e("p",{class:"text-amber-400 animate-pulse"},"Loading battle data...",-1)])])):a(c).recentMatches.length===0?(r(),i("div",Fe,[e("img",{src:s.ICON_SCROLL_EMPTY,alt:"",class:"w-12 h-12 pixelated mx-auto mb-3 opacity-50"},null,8,ze),t[13]||(t[13]=e("p",{class:"text-slate-400"},"No recent combat data",-1)),p(x,{to:"/matches",class:"rpg-btn-small mt-4 inline-flex"},{default:m(()=>[...t[12]||(t[12]=[v(" JOIN BATTLE ",-1)])]),_:1})])):(r(),i("div",He,[(r(!0),i(A,null,T(a(c).recentMatches,u=>(r(),i("div",{key:u.id,class:"pixel-box-sm bg-slate-800/60 p-3 flex items-center justify-between hover:bg-slate-800/80 transition-colors cursor-pointer"},[e("div",Ve,[e("div",{class:f(["w-2 h-2 rounded-full",u.ended?"bg-slate-500":"bg-emerald-400 animate-pulse"])},null,2),e("div",null,[e("p",We,"Battle #"+n(u.id.slice(0,8)),1),e("p",Ue,n(S(u.created)),1)])]),e("span",{class:f(["pixel-badge px-2 py-0.5 text-xs font-bold uppercase",u.ended?"bg-slate-700 text-slate-400":"bg-emerald-900/50 text-emerald-400 border-emerald-500/50"])},n(u.ended?"ENDED":"LIVE"),3)]))),128))]))])])]),e("div",Ye,[e("div",qe,[e("div",Ke,[e("img",{src:s.ICON_CROWN,alt:"",class:"w-5 h-5 pixelated"},null,8,Xe),t[14]||(t[14]=e("h3",{class:"text-lg font-bold text-amber-300"},"CHAMPION",-1))]),e("div",Je,[b.value?(r(),i("div",Qe,[e("div",Ze,[e("div",et,[e("img",{src:s.ICON_WARRIOR,alt:"",class:"w-14 h-14 pixelated"},null,8,tt)]),e("div",st," LVL "+n(b.value.level),1)]),e("h4",ot,n(b.value.name),1),e("div",at,[e("span",lt," Power: "+n(b.value.power),1)])])):(r(),i("div",nt,[t[16]||(t[16]=e("p",{class:"text-slate-500 text-sm"},"No champions found",-1)),p(x,{to:"/roster",class:"rpg-btn-small mt-3 inline-flex"},{default:m(()=>[...t[15]||(t[15]=[v(" RECRUIT ",-1)])]),_:1})]))])]),e("div",rt,[t[21]||(t[21]=e("div",{class:"p-4 border-b-4 border-slate-800"},[e("h3",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider"},"Quick Actions")],-1)),e("div",it,[p(x,{to:"/matches",class:"pixel-box-sm bg-slate-800/60 p-4 flex flex-col items-center justify-center hover:bg-slate-800/80 hover:border-indigo-500/50 transition-all group"},{default:m(()=>[e("img",{src:s.ICON_SWORDS,alt:"",class:"w-8 h-8 pixelated mb-2 group-hover:scale-110 transition-transform"},null,8,ct),t[17]||(t[17]=e("span",{class:"text-xs font-bold text-slate-300"},"BATTLE",-1))]),_:1}),p(x,{to:"/roster",class:"pixel-box-sm bg-slate-800/60 p-4 flex flex-col items-center justify-center hover:bg-slate-800/80 hover:border-purple-500/50 transition-all group"},{default:m(()=>[e("img",{src:s.ICON_KNIGHT,alt:"",class:"w-8 h-8 pixelated mb-2 group-hover:scale-110 transition-transform"},null,8,dt),t[18]||(t[18]=e("span",{class:"text-xs font-bold text-slate-300"},"ROSTER",-1))]),_:1}),p(x,{to:"/inventory",class:"pixel-box-sm bg-slate-800/60 p-4 flex flex-col items-center justify-center hover:bg-slate-800/80 hover:border-emerald-500/50 transition-all group"},{default:m(()=>[e("img",{src:s.ICON_CHEST,alt:"",class:"w-8 h-8 pixelated mb-2 group-hover:scale-110 transition-transform"},null,8,pt),t[19]||(t[19]=e("span",{class:"text-xs font-bold text-slate-300"},"VAULT",-1))]),_:1}),p(x,{to:"/leagues",class:"pixel-box-sm bg-slate-800/60 p-4 flex flex-col items-center justify-center hover:bg-slate-800/80 hover:border-amber-500/50 transition-all group"},{default:m(()=>[e("img",{src:s.ICON_TROPHY,alt:"",class:"w-8 h-8 pixelated mb-2 group-hover:scale-110 transition-transform"},null,8,xt),t[20]||(t[20]=e("span",{class:"text-xs font-bold text-slate-300"},"LEAGUES",-1))]),_:1})])])])])])],4)}}}),bt=j(mt,[["__scopeId","data-v-cd2f71a5"]]);export{bt as default};
