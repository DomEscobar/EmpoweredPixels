import{u as I}from"./store-CAy-Ahly.js";import{C as h,D as b,E as y,u as g,d as k,y as C,e as o,o as n,c,a as e,t as r,j as R,g as d,b as v,n as w,w as x,F as E,s as A,q as T,x as G,r as M,_ as D}from"./index-Cwji7ajR.js";import{u as j}from"./store-DQkTzz25.js";async function P(a,s=1,l=20,i){return h(`${b.match}/browse`,{method:"POST",token:a,body:{page:s,pageSize:l,status:i}})}async function $(a){try{return await h(`${b.match}/current`,{token:a})}catch{return null}}const B=y("matches",{state:()=>({currentMatch:null,recentMatches:[],isLoading:!1,error:null}),actions:{async fetchCurrentMatch(){const a=g();if(a.token){this.isLoading=!0;try{const s=await $(a.token);this.currentMatch=s??null}catch{this.currentMatch=null}finally{this.isLoading=!1}}},async fetchRecentMatches(){const a=g();if(a.token){this.isLoading=!0;try{const s=await P(a.token,1,5,"completed");this.recentMatches=s.items||[]}catch{this.error="Failed to load match history"}finally{this.isLoading=!1}}}}});async function F(a){return h(b.reward,{token:a})}async function H(a,s,l){return h(`${b.reward}/claim`,{method:"POST",token:a,body:{id:s,poolId:l}})}async function V(a){return h(`${b.reward}/claim/all`,{method:"POST",token:a,body:{}})}const W=y("rewards",{state:()=>({rewards:[],lastClaimed:null,isLoading:!1,error:null}),getters:{rewardCount:a=>a.rewards.length},actions:{async fetchRewards(){const a=g();if(a.token){this.isLoading=!0;try{this.rewards=await F(a.token)}catch{this.error="Failed to load rewards"}finally{this.isLoading=!1}}},async claim(a){const s=g();if(s.token){this.isLoading=!0;try{const l=await H(s.token,a.id,a.poolId);return this.lastClaimed=l,this.rewards=this.rewards.filter(i=>i.id!==a.id),l}catch(l){throw this.error="Failed to claim reward",l}finally{this.isLoading=!1}}},async claimAll(){const a=g();if(a.token){this.isLoading=!0;try{const s=await V(a.token);return this.lastClaimed=s,this.rewards=[],s}catch(s){throw this.error="Failed to claim rewards",s}finally{this.isLoading=!1}}}}}),z="",N={double_drops:{name:"Double Drops",icon:"ðŸ“¦",color:"text-purple-400"},double_xp:{name:"Double XP",icon:"âš¡",color:"text-yellow-400"},bonus_gold:{name:"Bonus Gold",icon:"ðŸ’°",color:"text-amber-400"},half_price:{name:"Half Price",icon:"ðŸ·ï¸",color:"text-green-400"}};async function U(a){const s=await fetch(`${z}/api/events/status`,{headers:{Authorization:`Bearer ${a}`}});if(!s.ok)throw new Error("Failed to fetch event status");return s.json()}const Y=y("events",{state:()=>({eventStatus:null,isLoading:!1,error:null}),actions:{async fetchStatus(){const a=g();if(a.token){this.isLoading=!0;try{this.eventStatus=await U(a.token)}catch(s){this.error=s.message}finally{this.isLoading=!1}}}}}),q={key:0,class:"pixel-box bg-gradient-to-r from-purple-900/50 to-amber-900/50 border-amber-500/50 p-4 mb-6"},K={class:"flex items-center justify-between"},X={class:"flex items-center gap-4"},J={class:"text-4xl animate-pulse"},Q={class:"text-lg font-black text-amber-400 uppercase tracking-wider"},Z={class:"text-sm text-slate-300"},ee={class:"text-right"},te={class:"text-2xl font-mono font-bold text-amber-400"},se=k({__name:"EventBanner",setup(a){const s=Y();return C(()=>{s.fetchStatus()}),(l,i)=>o(s).eventStatus?.has_active_event?(n(),c("div",q,[e("div",K,[e("div",X,[e("div",J,r(o(N)[o(s).eventStatus.type||""]?.icon||"ðŸŽ‰"),1),e("div",null,[e("h3",Q,r(o(N)[o(s).eventStatus.type||""]?.name||"Special Event")+" Active! ",1),e("p",Z,r(o(s).eventStatus.multiplier)+"x rewards for a limited time! ",1)])]),e("div",ee,[i[0]||(i[0]=e("div",{class:"text-xs text-slate-400 uppercase"},"Ends in",-1)),e("div",te,r(o(s).eventStatus.time_remaining),1)])])])):R("",!0)}}),ae={class:"relative z-10 max-w-7xl mx-auto space-y-6"},oe={class:"pixel-box bg-slate-900/95 p-6"},le={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},re={class:"flex items-center gap-4"},ie=["src"],ne={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},ce={class:"pixel-box bg-slate-900/90 p-4 group hover:bg-slate-900/95 transition-colors"},de={class:"flex items-center justify-between"},pe={class:"mt-2 text-3xl font-bold text-white text-shadow-retro"},xe={class:"p-3 pixel-box-sm bg-indigo-900/30 border-indigo-500/30 group-hover:border-indigo-400/50 transition-colors"},me=["src"],_e={class:"pixel-box bg-slate-900/90 p-4 group hover:bg-slate-900/95 transition-colors"},ue={class:"flex items-center justify-between"},ge={class:"mt-2 text-3xl font-bold text-white text-shadow-retro"},he={class:"p-3 pixel-box-sm bg-purple-900/30 border-purple-500/30 group-hover:border-purple-400/50 transition-colors"},be=["src"],fe={class:"pixel-box bg-slate-900/90 p-4 group hover:bg-slate-900/95 transition-colors"},ve={class:"flex items-center justify-between"},we={class:"mt-2 text-3xl font-bold text-white text-shadow-retro"},ye={class:"p-3 pixel-box-sm bg-pink-900/30 border-pink-500/30 group-hover:border-pink-400/50 transition-colors"},Oe=["src"],Ne={class:"flex items-center justify-between"},ke={class:"mt-2 text-3xl font-bold text-white text-shadow-retro"},Ce=["src"],Le={class:"mt-4"},Se={key:1,class:"text-xs text-slate-600"},Ie={class:"grid gap-6 lg:grid-cols-3"},Re={class:"lg:col-span-2"},Ee={class:"pixel-box bg-slate-900/90 h-full"},Ae={class:"p-4 border-b-4 border-slate-800 flex items-center justify-between"},Te={class:"flex items-center gap-3"},Ge=["src"],Me={class:"p-4"},De={key:0,class:"py-12 text-center"},je={key:1,class:"py-12 text-center"},Pe=["src"],$e={key:2,class:"space-y-2 max-h-80 overflow-y-auto custom-scrollbar"},Be={class:"flex items-center gap-3"},Fe={class:"font-bold text-slate-200 text-sm"},He={class:"text-xs text-slate-500"},Ve={class:"space-y-6"},We={class:"pixel-box bg-slate-900/90"},ze={class:"p-4 border-b-4 border-slate-800 flex items-center gap-3"},Ue=["src"],Ye={class:"p-4"},qe={key:0,class:"text-center"},Ke={class:"relative inline-block"},Xe={class:"pixel-box-sm w-20 h-20 mx-auto flex items-center justify-center bg-slate-800/80 border-indigo-500/50 mb-3"},Je=["src"],Qe={class:"absolute -bottom-1 -right-1 bg-indigo-600 text-white text-xs px-2 py-0.5 font-bold border-2 border-slate-900"},Ze={class:"text-lg font-bold text-white mt-2"},et={class:"mt-2"},tt={class:"pixel-badge bg-slate-800 text-slate-300 px-2 py-1 text-xs border-slate-600"},st={key:1,class:"py-6 text-center"},at={class:"pixel-box bg-slate-900/90"},ot={class:"p-4 grid grid-cols-2 gap-3"},lt=["src"],rt=["src"],it=["src"],nt=["src"],ct=k({__name:"Dashboard",setup(a){const s={BG_DUNGEON:"https://vibemedia.space/bg_dungeon_dash_5y6t7u_v1.png?prompt=dark%20dungeon%20stone%20floor%20tile%20texture%20seamless&style=pixel_game_asset&key=NOGON",ICON_CASTLE:"https://vibemedia.space/icon_castle_cmd_8i9o0p_v1.png?prompt=medieval%20castle%20tower%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_KNIGHT:"https://vibemedia.space/icon_knight_1a2s3d_v1.png?prompt=armored%20knight%20helmet%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_FLAG:"https://vibemedia.space/icon_flag_war_4f5g6h_v1.png?prompt=war%20banner%20flag%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_SWORDS:"https://vibemedia.space/icon_crossed_swords_7j8k9l_v1.png?prompt=crossed%20steel%20swords%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_CHEST:"https://vibemedia.space/icon_chest_gold_0m1n2b_v1.png?prompt=golden%20treasure%20chest%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_SCROLL:"https://vibemedia.space/icon_scroll_log_3v4c5x_v1.png?prompt=ancient%20scroll%20with%20writing%20pixel%20art&style=pixel_game_asset&key=NOGON",ICON_SCROLL_EMPTY:"https://vibemedia.space/icon_scroll_blank_6z7a8s_v1.png?prompt=blank%20parchment%20scroll%20pixel%20art&style=pixel_game_asset&key=NOGON",ICON_CROWN:"https://vibemedia.space/icon_crown_gold_9d0f1g_v1.png?prompt=golden%20royal%20crown%20pixel%20art%20icon&style=pixel_game_asset&key=NOGON",ICON_WARRIOR:"https://vibemedia.space/icon_warrior_elite_2h3j4k_v1.png?prompt=elite%20warrior%20knight%20pixel%20art%20character&style=pixel_game_asset&key=NOGON",ICON_TROPHY:"https://vibemedia.space/icon_trophy_league_5l6p7q_v1.png?prompt=golden%20trophy%20cup%20pixel%20art&style=pixel_game_asset&key=NOGON"},l=I(),i=B(),m=W(),O=j(),f=G(()=>l.fighters.length?[...l.fighters].sort((_,t)=>t.level!==_.level?t.level-_.level:t.power-_.power)[0]:null),L=_=>new Date(_).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),S=async()=>{await m.claimAll()};return C(()=>{Promise.all([l.fetchFighters(),i.fetchRecentMatches(),m.fetchRewards(),O.fetchLeagues()])}),(_,t)=>{const p=M("router-link");return n(),c("div",{class:"min-h-screen p-4 md:p-8 font-mono",style:T({backgroundImage:`url('${s.BG_DUNGEON}')`,backgroundSize:"128px 128px",imageRendering:"pixelated"})},[t[22]||(t[22]=e("div",{class:"pointer-events-none fixed inset-0 z-50 opacity-[0.03] bg-[repeating-linear-gradient(0deg,transparent,transparent_2px,rgba(0,0,0,0.3)_2px,rgba(0,0,0,0.3)_4px)]"},null,-1)),t[23]||(t[23]=e("div",{class:"pointer-events-none fixed inset-0 z-40 bg-[radial-gradient(ellipse_at_center,transparent_0%,rgba(0,0,0,0.4)_100%)]"},null,-1)),e("div",ae,[e("header",oe,[e("div",le,[e("div",re,[e("img",{src:s.ICON_CASTLE,alt:"",class:"w-14 h-14 pixelated"},null,8,ie),t[0]||(t[0]=e("div",null,[e("h1",{class:"text-2xl md:text-3xl font-bold text-amber-400 text-shadow-retro tracking-wide"}," COMMAND CENTER "),e("p",{class:"text-slate-400 text-sm mt-1"}," Welcome back, Commander. All systems operational. ")],-1))]),t[1]||(t[1]=e("div",{class:"pixel-box-sm bg-emerald-900/30 border-emerald-500/50 px-4 py-2 flex items-center gap-2"},[e("div",{class:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e("span",{class:"text-emerald-400 text-xs font-bold uppercase tracking-wider"},"Online")],-1))])]),d(se),e("div",ne,[e("div",ce,[e("div",de,[e("div",null,[t[2]||(t[2]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Active Roster",-1)),e("p",pe,r(o(l).fighters.length),1)]),e("div",xe,[e("img",{src:s.ICON_KNIGHT,alt:"",class:"w-8 h-8 pixelated"},null,8,me)])]),t[3]||(t[3]=e("div",{class:"mt-4 h-2 pixel-box-sm bg-slate-800/80 overflow-hidden"},[e("div",{class:"h-full bg-linear-to-r from-indigo-600 to-indigo-400",style:{width:"75%"}})],-1))]),e("div",_e,[e("div",ue,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Active Campaigns",-1)),e("p",ge,r(o(O).activeLeagueCount),1)]),e("div",he,[e("img",{src:s.ICON_FLAG,alt:"",class:"w-8 h-8 pixelated"},null,8,be)])]),t[5]||(t[5]=e("div",{class:"mt-4 flex items-center text-xs"},[e("span",{class:"flex items-center gap-1 text-emerald-400 font-bold"},[e("span",{class:"w-1.5 h-1.5 rounded-full bg-emerald-400"}),v(" LIVE ")]),e("span",{class:"text-slate-500 ml-2"},"Season 1")],-1))]),e("div",fe,[e("div",ve,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Combat Record",-1)),e("p",we,r(o(i).recentMatches.length),1)]),e("div",ye,[e("img",{src:s.ICON_SWORDS,alt:"",class:"w-8 h-8 pixelated"},null,8,Oe)])]),t[7]||(t[7]=e("div",{class:"mt-4 text-xs text-slate-500"}," Recent engagements ",-1))]),e("div",{class:w(["pixel-box bg-slate-900/90 p-4 group transition-all",o(m).rewardCount>0?"border-amber-500/50 shadow-lg shadow-amber-500/10":""])},[e("div",Ne,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Pending Rewards",-1)),e("p",ke,r(o(m).rewardCount),1)]),e("div",{class:w(["p-3 pixel-box-sm bg-amber-900/30 border-amber-500/30 transition-colors",o(m).rewardCount>0?"animate-pulse border-amber-400/60":""])},[e("img",{src:s.ICON_CHEST,alt:"",class:"w-8 h-8 pixelated"},null,8,Ce)],2)]),e("div",Le,[o(m).rewardCount>0?(n(),c("button",{key:0,class:"rpg-btn w-full text-sm py-2",onClick:S}," CLAIM ALL ")):(n(),c("p",Se,"No pending rewards"))])],2)]),e("div",Ie,[e("div",Re,[e("div",Ee,[e("div",Ae,[e("div",Te,[e("img",{src:s.ICON_SCROLL,alt:"",class:"w-5 h-5 pixelated"},null,8,Ge),t[9]||(t[9]=e("h3",{class:"text-lg font-bold text-amber-300"},"BATTLE LOG",-1))]),d(p,{to:"/matches",class:"rpg-btn-small"},{default:x(()=>[...t[10]||(t[10]=[v(" VIEW ALL ",-1)])]),_:1})]),e("div",Me,[o(i).isLoading?(n(),c("div",De,[...t[11]||(t[11]=[e("div",{class:"inline-block animate-spin text-3xl mb-3"},"âš”ï¸",-1),e("p",{class:"text-amber-400 animate-pulse"},"Loading battle data...",-1)])])):o(i).recentMatches.length===0?(n(),c("div",je,[e("img",{src:s.ICON_SCROLL_EMPTY,alt:"",class:"w-12 h-12 pixelated mx-auto mb-3 opacity-50"},null,8,Pe),t[13]||(t[13]=e("p",{class:"text-slate-400"},"No recent combat data",-1)),d(p,{to:"/matches",class:"rpg-btn-small mt-4 inline-flex"},{default:x(()=>[...t[12]||(t[12]=[v(" JOIN BATTLE ",-1)])]),_:1})])):(n(),c("div",$e,[(n(!0),c(E,null,A(o(i).recentMatches,u=>(n(),c("div",{key:u.id,class:"pixel-box-sm bg-slate-800/60 p-3 flex items-center justify-between hover:bg-slate-800/80 transition-colors cursor-pointer"},[e("div",Be,[e("div",{class:w(["w-2 h-2 rounded-full",u.ended?"bg-slate-500":"bg-emerald-400 animate-pulse"])},null,2),e("div",null,[e("p",Fe,"Battle #"+r(u.id.slice(0,8)),1),e("p",He,r(L(u.created)),1)])]),e("span",{class:w(["pixel-badge px-2 py-0.5 text-xs font-bold uppercase",u.ended?"bg-slate-700 text-slate-400":"bg-emerald-900/50 text-emerald-400 border-emerald-500/50"])},r(u.ended?"ENDED":"LIVE"),3)]))),128))]))])])]),e("div",Ve,[e("div",We,[e("div",ze,[e("img",{src:s.ICON_CROWN,alt:"",class:"w-5 h-5 pixelated"},null,8,Ue),t[14]||(t[14]=e("h3",{class:"text-lg font-bold text-amber-300"},"CHAMPION",-1))]),e("div",Ye,[f.value?(n(),c("div",qe,[e("div",Ke,[e("div",Xe,[e("img",{src:s.ICON_WARRIOR,alt:"",class:"w-14 h-14 pixelated"},null,8,Je)]),e("div",Qe," LVL "+r(f.value.level),1)]),e("h4",Ze,r(f.value.name),1),e("div",et,[e("span",tt," Power: "+r(f.value.power),1)])])):(n(),c("div",st,[t[16]||(t[16]=e("p",{class:"text-slate-500 text-sm"},"No champions found",-1)),d(p,{to:"/roster",class:"rpg-btn-small mt-3 inline-flex"},{default:x(()=>[...t[15]||(t[15]=[v(" RECRUIT ",-1)])]),_:1})]))])]),e("div",at,[t[21]||(t[21]=e("div",{class:"p-4 border-b-4 border-slate-800"},[e("h3",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider"},"Quick Actions")],-1)),e("div",ot,[d(p,{to:"/matches",class:"pixel-box-sm bg-slate-800/60 p-4 flex flex-col items-center justify-center hover:bg-slate-800/80 hover:border-indigo-500/50 transition-all group"},{default:x(()=>[e("img",{src:s.ICON_SWORDS,alt:"",class:"w-8 h-8 pixelated mb-2 group-hover:scale-110 transition-transform"},null,8,lt),t[17]||(t[17]=e("span",{class:"text-xs font-bold text-slate-300"},"BATTLE",-1))]),_:1}),d(p,{to:"/roster",class:"pixel-box-sm bg-slate-800/60 p-4 flex flex-col items-center justify-center hover:bg-slate-800/80 hover:border-purple-500/50 transition-all group"},{default:x(()=>[e("img",{src:s.ICON_KNIGHT,alt:"",class:"w-8 h-8 pixelated mb-2 group-hover:scale-110 transition-transform"},null,8,rt),t[18]||(t[18]=e("span",{class:"text-xs font-bold text-slate-300"},"ROSTER",-1))]),_:1}),d(p,{to:"/inventory",class:"pixel-box-sm bg-slate-800/60 p-4 flex flex-col items-center justify-center hover:bg-slate-800/80 hover:border-emerald-500/50 transition-all group"},{default:x(()=>[e("img",{src:s.ICON_CHEST,alt:"",class:"w-8 h-8 pixelated mb-2 group-hover:scale-110 transition-transform"},null,8,it),t[19]||(t[19]=e("span",{class:"text-xs font-bold text-slate-300"},"VAULT",-1))]),_:1}),d(p,{to:"/leagues",class:"pixel-box-sm bg-slate-800/60 p-4 flex flex-col items-center justify-center hover:bg-slate-800/80 hover:border-amber-500/50 transition-all group"},{default:x(()=>[e("img",{src:s.ICON_TROPHY,alt:"",class:"w-8 h-8 pixelated mb-2 group-hover:scale-110 transition-transform"},null,8,nt),t[20]||(t[20]=e("span",{class:"text-xs font-bold text-slate-300"},"LEAGUES",-1))]),_:1})])])])])])],4)}}}),mt=D(ct,[["__scopeId","data-v-cd2f71a5"]]);export{mt as default};
