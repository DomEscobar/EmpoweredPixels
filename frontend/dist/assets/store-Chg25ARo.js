import{C as s,D as i,E as o,u as e}from"./index-D6vqilKk.js";async function d(t){return s(i.reward,{token:t})}async function l(t,a,r){return s(`${i.reward}/claim`,{method:"POST",token:t,body:{id:a,poolId:r}})}async function c(t){return s(`${i.reward}/claim/all`,{method:"POST",token:t,body:{}})}const u=o("rewards",{state:()=>({rewards:[],lastClaimed:null,isLoading:!1,error:null}),getters:{rewardCount:t=>t.rewards.length},actions:{async fetchRewards(){const t=e();if(t.token){this.isLoading=!0;try{this.rewards=await d(t.token)}catch{this.error="Failed to load rewards"}finally{this.isLoading=!1}}},async claim(t){const a=e();if(a.token){this.isLoading=!0;try{const r=await l(a.token,t.id,t.poolId);return this.lastClaimed=r,this.rewards=this.rewards.filter(n=>n.id!==t.id),r}catch(r){throw this.error="Failed to claim reward",r}finally{this.isLoading=!1}}},async claimAll(){const t=e();if(t.token){this.isLoading=!0;try{const a=await c(t.token);return this.lastClaimed=a,this.rewards=[],a}catch(a){throw this.error="Failed to claim rewards",a}finally{this.isLoading=!1}}}}});export{u};
